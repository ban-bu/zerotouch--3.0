import{r as x,a as re,R as ae}from"./vendor-b1791c80.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const n of c.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function a(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(s){if(s.ep)return;s.ep=!0;const c=a(s);fetch(s.href,c)}})();var Y={exports:{}},$={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ne=x,le=Symbol.for("react.element"),oe=Symbol.for("react.fragment"),ie=Object.prototype.hasOwnProperty,ce=ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,de={key:!0,ref:!0,__self:!0,__source:!0};function Q(r,t,a){var o,s={},c=null,n=null;a!==void 0&&(c=""+a),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(n=t.ref);for(o in t)ie.call(t,o)&&!de.hasOwnProperty(o)&&(s[o]=t[o]);if(r&&r.defaultProps)for(o in t=r.defaultProps,t)s[o]===void 0&&(s[o]=t[o]);return{$$typeof:le,type:r,key:c,ref:n,props:s,_owner:ce.current}}$.Fragment=oe;$.jsx=Q;$.jsxs=Q;Y.exports=$;var e=Y.exports,q={},G=re;q.createRoot=G.createRoot,q.hydrateRoot=G.hydrateRoot;const me={currentScenario:"retail",messages:{problem:[],llm:[],solution:[]},processing:{llm:!1,problem:!1,solution:!1},settings:{autoScroll:!0,showTimestamps:!0,enableNotifications:!0},statistics:{totalMessages:0,totalProcessingTime:0,averageResponseTime:0}},_={SET_SCENARIO:"SET_SCENARIO",ADD_MESSAGE:"ADD_MESSAGE",CLEAR_MESSAGES:"CLEAR_MESSAGES",SET_PROCESSING:"SET_PROCESSING",UPDATE_SETTINGS:"UPDATE_SETTINGS",UPDATE_STATISTICS:"UPDATE_STATISTICS"},pe=(r,t)=>{switch(t.type){case _.SET_SCENARIO:return{...r,currentScenario:t.payload};case _.ADD_MESSAGE:const{panel:a,message:o}=t.payload;return{...r,messages:{...r.messages,[a]:[...r.messages[a],o]},statistics:{...r.statistics,totalMessages:r.statistics.totalMessages+1}};case _.CLEAR_MESSAGES:return{...r,messages:{problem:[],llm:[],solution:[]},statistics:{...r.statistics,totalMessages:0}};case _.SET_PROCESSING:const{panel:s,isProcessing:c}=t.payload;return{...r,processing:{...r.processing,[s]:c}};case _.UPDATE_SETTINGS:return{...r,settings:{...r.settings,...t.payload}};case _.UPDATE_STATISTICS:return{...r,statistics:{...r.statistics,...t.payload}};default:return r}},ue=x.createContext(),xe=({children:r})=>{const[t,a]=x.useReducer(pe,me),o=x.useCallback(i=>{a({type:_.SET_SCENARIO,payload:i})},[]),s=x.useCallback((i,p)=>{a({type:_.ADD_MESSAGE,payload:{panel:i,message:p}})},[]),c=x.useCallback(()=>{a({type:_.CLEAR_MESSAGES})},[]),n=x.useCallback((i,p)=>{a({type:_.SET_PROCESSING,payload:{panel:i,isProcessing:p}})},[]),u=x.useCallback(i=>{a({type:_.UPDATE_SETTINGS,payload:i})},[]),m=x.useCallback(i=>{a({type:_.UPDATE_STATISTICS,payload:i})},[]),j={isAnyProcessing:Object.values(t.processing).some(Boolean),totalMessagesCount:Object.values(t.messages).reduce((i,p)=>i+p.length,0),hasMessages:Object.values(t.messages).some(i=>i.length>0)},d={...t,...j,setScenario:o,addMessage:s,clearMessages:c,setProcessing:n,updateSettings:u,updateStatistics:m};return e.jsx(ue.Provider,{value:d,children:r})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var he={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),v=(r,t)=>{const a=x.forwardRef(({color:o="currentColor",size:s=24,strokeWidth:c=2,absoluteStrokeWidth:n,className:u="",children:m,...j},d)=>x.createElement("svg",{ref:d,...he,width:s,height:s,stroke:o,strokeWidth:n?Number(c)*24/Number(s):c,className:["lucide",`lucide-${ge(r)}`,u].join(" "),...j},[...t.map(([i,p])=>x.createElement(i,p)),...Array.isArray(m)?m:[m]]));return a.displayName=`${r}`,a};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=v("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=v("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=v("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=v("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=v("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=v("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=v("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=v("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=v("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=v("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=v("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=v("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=v("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=v("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=v("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=v("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=v("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=v("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=v("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=v("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=v("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=v("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=v("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ce=({scenarios:r,currentScenario:t,onScenarioChange:a})=>(r[t],e.jsx("div",{className:"flex items-center space-x-2",children:Object.values(r).map(o=>{const s=o.id===t;return e.jsxs("button",{onClick:()=>a(o.id),className:"flex items-center space-x-2 px-3 py-2 rounded-lg border transition-all duration-200 "+(s?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"),title:o.description,children:[e.jsx("div",{className:"icon-container "+(s?"bg-gradient-to-br from-blue-500 to-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"),children:e.jsx(o.icon,{className:"w-4 h-4"})}),e.jsx("div",{className:"text-sm font-medium",children:o.name})]},o.id)})})),Re=({message:r="æ­£åœ¨å‘é€æ¶ˆæ¯..."})=>e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 text-sm",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]}),e.jsx("span",{children:r})]}),Le=({message:r="AIæ­£åœ¨æ€è€ƒ"})=>e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx("span",{className:"text-sm",children:r}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"200ms"}}),e.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-pulse",style:{animationDelay:"400ms"}})]})]}),M=({children:r,type:t="fade",duration:a=300,show:o=!0,onExited:s=()=>{}})=>{const[c,n]=x.useState(o),[u,m]=x.useState(!1),j=(i,p,f)=>{const h="transition-all duration-300 ease-in-out";if(!p)return"opacity-0 scale-95";switch(i){case"fade":return`${h} opacity-100`;case"slide-up":return`${h} opacity-100 translate-y-0`;case"slide-down":return`${h} opacity-100 translate-y-0`;case"slide-left":return`${h} opacity-100 translate-x-0`;case"slide-right":return`${h} opacity-100 translate-x-0`;case"scale":return`${h} opacity-100 scale-100`;default:return`${h} opacity-100`}};if(x.useEffect(()=>{let i;return o&&!c?(n(!0),m(!0),i=setTimeout(()=>{m(!1)},50)):!o&&c&&(m(!0),i=setTimeout(()=>{n(!1),m(!1),s()},a)),()=>{clearTimeout(i)}},[o,c,a,s]),!c&&!o)return null;const d=j(t,o);return e.jsx("div",{className:d,children:r})},Ae=({scenario:r,messages:t,onSendMessage:a,isProcessing:o})=>{const[s,c]=x.useState(""),[n,u]=x.useState(null),m=x.useRef(null),j=x.useRef(null),d=()=>{var g;(g=m.current)==null||g.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{d()},[t]);const i=g=>{g.preventDefault(),!(!s.trim()&&!n)&&(a({text:s.trim(),image:n,timestamp:new Date().toISOString()}),c(""),u(null),j.current&&(j.current.value=""))},p=g=>{const N=g.target.files[0];N&&N.type.startsWith("image/")&&u(N)},f=()=>{u(null),j.current&&(j.current.value="")},h=()=>{c(r.example)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"panel-header",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(V,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"é—®é¢˜ç«¯"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:r.problemRole})]})]}),e.jsx("button",{onClick:h,className:"btn-ghost text-xs",children:"æ’å…¥ç¤ºä¾‹"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[(!t||t.length===0)&&e.jsxs("div",{className:"text-center text-gray-500 py-8",children:[e.jsx(V,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"åœ¨è¿™é‡Œè¾“å…¥æ‚¨çš„éœ€æ±‚æˆ–é—®é¢˜"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"æ”¯æŒæ–‡æœ¬å’Œå›¾ç‰‡è¾“å…¥"})]}),t&&t.map((g,N)=>e.jsxs("div",{className:"space-y-2",children:[g.type==="user"&&e.jsx(M,{type:"slide-right",show:!0,children:e.jsxs("div",{className:"message-bubble message-user slide-in-right",children:[g.image&&e.jsx("div",{className:"mb-2",children:e.jsx("img",{src:URL.createObjectURL(g.image),alt:"ç”¨æˆ·ä¸Šä¼ ",className:"max-w-full h-auto rounded-lg shadow-md"})}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(V,{className:"w-4 h-4 text-white mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap",children:g.text})}),e.jsx("div",{className:"text-xs text-blue-100 mt-1 opacity-75",children:new Date(g.timestamp).toLocaleTimeString()})]})]})]})}),g.type==="ai_response"&&e.jsx(M,{type:"slide-left",show:!0,children:e.jsx("div",{className:"message-bubble message-ai slide-in-left",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-gray-600 dark:text-gray-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap",children:g.text})}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:new Date(g.timestamp).toLocaleTimeString()})]})]})})})]},N)),o&&e.jsx("div",{className:"message-bubble message-ai",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-gray-600"}),e.jsx(Le,{message:"AIæ­£åœ¨åˆ†æžæ‚¨çš„é—®é¢˜"})]})}),e.jsx("div",{ref:m})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:e.jsx("form",{onSubmit:i,className:"space-y-3",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{value:s,onChange:g=>c(g.target.value),placeholder:`ä½œä¸º${r.problemRole}ï¼Œè¯·æè¿°æ‚¨çš„éœ€æ±‚...`,className:"input-field resize-none transition-all duration-200 focus:shadow-md",rows:3,disabled:o}),n&&e.jsx(M,{type:"scale",show:!0,children:e.jsxs("div",{className:"mt-3 relative inline-block",children:[e.jsx("img",{src:URL.createObjectURL(n),alt:"é¢„è§ˆ",className:"max-w-xs h-auto rounded-lg border border-gray-300 shadow-md"}),e.jsx("button",{type:"button",onClick:f,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600 shadow-lg transition-all duration-200 hover:scale-110",children:"Ã—"})]})}),o&&e.jsx("div",{className:"mt-2",children:e.jsx(Re,{message:"æ­£åœ¨å‘é€æ¶ˆæ¯..."})})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("input",{ref:j,type:"file",accept:"image/*",onChange:p,className:"hidden",id:"image-upload"}),e.jsx("label",{htmlFor:"image-upload",className:"btn-ghost p-3 transition-all duration-200 hover:scale-105 cursor-pointer",title:"ä¸Šä¼ å›¾ç‰‡",children:e.jsx(we,{className:"w-5 h-5"})}),e.jsx("button",{type:"submit",disabled:!s.trim()&&!n||o,className:"btn-primary p-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",title:"å‘é€æ¶ˆæ¯",children:e.jsx(ee,{className:"w-5 h-5"})})]})]})})})]})},Te=({processing:r,messages:t})=>{const a=x.useRef(null),o=()=>{var n;(n=a.current)==null||n.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{o()},[t]);const s=n=>n.includes("é—®é¢˜ç«¯")?e.jsx(F,{className:"w-4 h-4 text-blue-600"}):n.includes("æ–¹æ¡ˆç«¯")?e.jsx(H,{className:"w-4 h-4 text-green-600"}):n.includes("å»ºè®®")?e.jsx(L,{className:"w-4 h-4 text-purple-600"}):n.includes("è¿½é—®")?e.jsx(je,{className:"w-4 h-4 text-orange-600"}):n.includes("æœ€ç»ˆ")?e.jsx(be,{className:"w-4 h-4 text-indigo-600"}):e.jsx(A,{className:"w-4 h-4 text-gray-600"}),c=n=>n.includes("é—®é¢˜ç«¯")?"æ­£åœ¨åˆ†æžå®¢æˆ·éœ€æ±‚...":n.includes("æ–¹æ¡ˆç«¯")?"æ­£åœ¨ä¼˜åŒ–ä¼ä¸šå›žå¤...":n.includes("å»ºè®®")?"æ­£åœ¨ç”Ÿæˆä¸“ä¸šå»ºè®®...":n.includes("è¿½é—®")?"æ­£åœ¨ç”Ÿæˆè¿½é—®é—®é¢˜...":n.includes("æœ€ç»ˆ")?"æ­£åœ¨å¤„ç†æœ€ç»ˆå›žå¤...":"æ­£åœ¨å¤„ç†...";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-purple-50 to-indigo-50 dark:from-purple-900/20 dark:to-indigo-900/20",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"icon-container bg-gradient-to-br from-purple-500 to-indigo-600",children:e.jsx(A,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"AI ä¸­ä»‹å¤„ç†"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"æ™ºèƒ½åˆ†æžå’Œæ–¹æ¡ˆç”Ÿæˆ"})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 mb-4",children:[t.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500 dark:text-gray-400 space-y-4",children:[e.jsx(M,{type:"fade",show:!0,children:e.jsx("div",{className:"p-4 bg-gradient-to-r from-purple-100 to-indigo-100 dark:from-purple-900/30 dark:to-indigo-900/30 rounded-full shadow-inner",children:e.jsx(Se,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"})})}),e.jsx("p",{className:"text-lg",children:"LLMä¸­ä»‹å°†åœ¨è¿™é‡Œå¤„ç†æ‚¨çš„è¯·æ±‚"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4 max-w-md",children:[e.jsx(M,{type:"slide-up",show:!0,delay:100,children:e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all duration-200 flex flex-col items-center text-sm",children:[e.jsx(L,{className:"w-6 h-6 mb-2 text-amber-500"}),e.jsx("span",{children:"åˆ†æžéœ€æ±‚"})]})}),e.jsx(M,{type:"slide-up",show:!0,delay:200,children:e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all duration-200 flex flex-col items-center text-sm",children:[e.jsx(H,{className:"w-6 h-6 mb-2 text-blue-500"}),e.jsx("span",{children:"ç”Ÿæˆæ–¹æ¡ˆ"})]})}),e.jsx(M,{type:"slide-up",show:!0,delay:300,children:e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm hover:shadow-md transition-all duration-200 flex flex-col items-center text-sm",children:[e.jsx(F,{className:"w-6 h-6 mb-2 text-green-500"}),e.jsx("span",{children:"ä¼˜åŒ–ç»“æžœ"})]})})]})]}),t.map((n,u)=>e.jsx(M,{type:"slide-left",show:!0,children:e.jsx("div",{className:"message-bubble message-system",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[s(n.title),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-secondary-800 mb-1",children:c(n.title)}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-secondary-600",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{children:"å¤„ç†å®Œæˆ"})]}),n.output&&e.jsx("div",{className:"message-content mt-2 text-sm text-secondary-700 dark:text-secondary-300",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:n.output})})]}),e.jsx("div",{className:"text-xs text-secondary-600 mt-2",children:new Date(n.timestamp).toLocaleTimeString()})]})]})})},u)),r&&e.jsx(M,{type:"fade",show:!0,children:e.jsx("div",{className:"p-4 rounded-lg border border-purple-200 dark:border-purple-800 bg-purple-50 dark:bg-purple-900/20",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"AIæ­£åœ¨å¤„ç†ä¸­..."})]})})}),e.jsx("div",{ref:a})]})]})},De=({scenario:r,messages:t,onSendMessage:a,isProcessing:o,iterationProcessing:s,iterationMode:c,pendingResponse:n,onGenerateSuggestion:u,onGenerateFollowUp:m,onConfirmSend:j,onCancelIteration:d})=>{const[i,p]=x.useState(""),[f,h]=x.useState(""),g=x.useRef(null),N=()=>{var y;(y=g.current)==null||y.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{N()},[t]),x.useEffect(()=>{c&&n&&h(n)},[c,n]);const w=y=>{y.preventDefault(),i.trim()&&(a({text:i.trim(),timestamp:new Date().toISOString()}),p(""))},I=()=>{f.trim()&&(j(f.trim()),h(""))},b=()=>{p({retail:"ä¸ºæ‚¨æŽ¨èä¸‰æ¬¾å•†åŠ¡è¥¿è£…ï¼š1ï¼‰æµ·å†›è“ä¿®èº«æ¬¾A123ï¼Œå”®ä»·1280å…ƒï¼Œæ„å¤§åˆ©è¿›å£é¢æ–™ï¼Œå…è´¹ä¿®æ”¹ï¼Œé€‚åˆæ¼”è®²åœºåˆï¼›2ï¼‰æ·±ç°ç»å…¸æ¬¾B456ï¼Œå”®ä»·1150å…ƒï¼Œèˆ’é€‚é€æ°”ï¼Œå•†åŠ¡é¦–é€‰ï¼›3ï¼‰ç‚­é»‘çŽ°ä»£æ¬¾C789ï¼Œå”®ä»·1350å…ƒï¼Œæ—¶å°šå‰ªè£ã€‚175cmèº«é«˜å»ºè®®é€‰Lç ï¼Œæä¾›3å¤©å†…ä¿®æ”¹æœåŠ¡ï¼Œå¯é¢„çº¦è¯•ç©¿ã€‚",enterprise:"æŽ¨èå¼€å‘AIé©±åŠ¨çš„ä¸ªæ€§åŒ–æŽ¨èç³»ç»Ÿï¼šç¬¬ä¸€é˜¶æ®µï¼ˆ1ä¸ªæœˆï¼‰ç”¨æˆ·è¡Œä¸ºæ•°æ®æ”¶é›†åˆ†æžï¼Œç¬¬äºŒé˜¶æ®µï¼ˆ1.5ä¸ªæœˆï¼‰ç®—æ³•å¼€å‘æµ‹è¯•ï¼Œç¬¬ä¸‰é˜¶æ®µï¼ˆ0.5ä¸ªæœˆï¼‰éƒ¨ç½²ä¼˜åŒ–ã€‚é¢„è®¡æŠ•å…¥3åç®—æ³•å·¥ç¨‹å¸ˆã€2åå‰ç«¯å¼€å‘ï¼Œæ€»é¢„ç®—45ä¸‡å…ƒï¼Œé¢„æœŸæå‡ç•™å­˜çŽ‡è‡³48%ã€‚",education:"æ³¢ç²’äºŒè±¡æ€§å¯ä»¥é€šè¿‡åŒç¼å®žéªŒç†è§£ï¼šå½“å…‰é€šè¿‡ä¸¤ä¸ªç¼æ—¶è¡¨çŽ°ä¸ºæ³¢ï¼ˆäº§ç”Ÿå¹²æ¶‰æ¡çº¹ï¼‰ï¼Œå½“æˆ‘ä»¬è§‚æµ‹å…‰å­é€šè¿‡å“ªä¸ªç¼æ—¶è¡¨çŽ°ä¸ºç²’å­ï¼ˆæ¡çº¹æ¶ˆå¤±ï¼‰ã€‚å»ºè®®åšæ³•ï¼š1ï¼‰è§‚çœ‹åŒç¼å®žéªŒè§†é¢‘ï¼Œ2ï¼‰å­¦ä¹ å…‰ç”µæ•ˆåº”åŽŸç†ï¼Œ3ï¼‰ç»ƒä¹ ç›¸å…³è®¡ç®—é¢˜ï¼Œ4ï¼‰å‚åŠ å®žéªŒè¯¾äº²è‡ªæ“ä½œã€‚"}[r.id]||"")};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"icon-container bg-gradient-to-br from-green-500 to-emerald-600",children:e.jsx(Z,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"è§£å†³æ–¹æ¡ˆ"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r.solutionRole})]})]}),e.jsx("button",{onClick:b,className:"text-xs text-green-600 hover:text-green-700 underline",children:"æ’å…¥ç¤ºä¾‹"})]})}),c&&e.jsx(M,{type:"slide-down",show:!0,children:e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-blue-800 dark:text-blue-200",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"è¿­ä»£æ¨¡å¼ - è¯·ç¡®è®¤æœ€ç»ˆå›žå¤å†…å®¹"})]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300 mt-1",children:'æ‚¨å¯ä»¥ç»§ç»­ç¼–è¾‘å†…å®¹ï¼Œç¡®è®¤æ— è¯¯åŽç‚¹å‡»"ç¡®è®¤å‘é€"å°†å›žå¤å‘é€ç»™å®¢æˆ·'})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4 p-4",children:[(!t||t.length===0)&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500 dark:text-gray-400 space-y-4",children:[e.jsx(M,{type:"fade",show:!0,children:e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30 rounded-full shadow-inner",children:e.jsx(Z,{className:"w-8 h-8 text-green-600 dark:text-green-400"})})}),e.jsx("p",{className:"text-lg",children:"ç­‰å¾…æŽ¥æ”¶LLMç¿»è¯‘çš„éœ€æ±‚"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"åœ¨æ­¤åŸºç¡€ä¸Šæä¾›å®šåˆ¶åŒ–è§£å†³æ–¹æ¡ˆ"})]}),t&&t.map((y,S)=>e.jsx(M,{type:y.type==="user"?"slide-right":"slide-left",show:!0,children:e.jsxs("div",{className:"space-y-2",children:[y.type==="llm_request"&&e.jsx("div",{className:"message-bubble bg-blue-50 text-blue-900 border border-blue-200 shadow-sm hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-blue-700 mb-1",children:"æ¥è‡ªLLMçš„ç¿»è¯‘éœ€æ±‚"}),e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200",children:y.text})}),e.jsx("div",{className:"text-xs text-blue-600 mt-1 opacity-75",children:new Date(y.timestamp).toLocaleTimeString()})]})]})}),y.type==="user"&&e.jsxs("div",{className:"message-bubble bg-green-100 text-green-900 ml-auto shadow-sm hover:shadow-md transition-all duration-200",children:[e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200",children:y.text})}),e.jsx("div",{className:"text-xs text-green-700 mt-1 opacity-75",children:new Date(y.timestamp).toLocaleTimeString()})]}),y.type==="ai_response"&&e.jsx("div",{className:"message-bubble message-ai shadow-sm hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-gray-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-gray-700 mb-1",children:"LLMä¼˜åŒ–åŽçš„å“åº”"}),e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200",children:y.text})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(y.timestamp).toLocaleTimeString()})]})]})}),y.type==="suggestion"&&e.jsx("div",{className:"message-bubble bg-purple-50 text-purple-900 border border-purple-200 shadow-sm hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(L,{className:"w-4 h-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-purple-700 mb-1",children:"AIç”Ÿæˆçš„å»ºè®®"}),e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200",children:y.text})}),e.jsx("div",{className:"text-xs text-purple-600 mt-1 opacity-75",children:new Date(y.timestamp).toLocaleTimeString()})]})]})}),y.type==="followup"&&e.jsx("div",{className:"message-bubble bg-orange-50 text-orange-900 border border-orange-200 shadow-sm hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(K,{className:"w-4 h-4 text-orange-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs font-medium text-orange-700 mb-1",children:"AIç”Ÿæˆçš„è¿½é—®"}),e.jsx("div",{className:"message-content",children:e.jsx("p",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200",children:y.text})}),e.jsx("div",{className:"text-xs text-orange-600 mt-1 opacity-75",children:new Date(y.timestamp).toLocaleTimeString()})]})]})})]})},S)),s&&e.jsx(M,{type:"fade",show:!0,children:e.jsx("div",{className:"message-bubble message-ai border border-purple-200 dark:border-purple-800 bg-purple-50 dark:bg-purple-900/20",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"w-4 h-4 text-purple-700 dark:text-purple-400"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-purple-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-sm text-purple-700 dark:text-purple-300",children:"AIæ­£åœ¨ç”Ÿæˆ..."})]})})}),o&&!s&&e.jsx(M,{type:"fade",show:!0,children:e.jsx("div",{className:"message-bubble message-ai border border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4 text-green-700 dark:text-green-400"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),e.jsx("div",{ref:g})]}),c&&e.jsx(M,{type:"slide-up",show:!0,children:e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-yellow-50 dark:bg-yellow-900/20",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-800 dark:text-yellow-200",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"ç¼–è¾‘æœ€ç»ˆå›žå¤å†…å®¹"})]}),e.jsx("textarea",{value:f,onChange:y=>h(y.target.value),placeholder:"ç¼–è¾‘æœ€ç»ˆå›žå¤å†…å®¹...",className:"input-field resize-none transition-all duration-200 focus:shadow-md",rows:4,disabled:o}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:I,disabled:!f.trim()||o,className:"flex-1 btn-primary p-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none transition-all duration-200 hover:scale-105 flex items-center justify-center space-x-2",title:"ç¡®è®¤å‘é€ç»™å®¢æˆ·",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:"ç¡®è®¤å‘é€"})]}),e.jsxs("button",{onClick:d,disabled:o,className:"px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",title:"å–æ¶ˆè¿­ä»£",children:[e.jsx(Ie,{className:"w-4 h-4"}),e.jsx("span",{children:"å–æ¶ˆ"})]})]})]})})}),!c&&e.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:e.jsxs("form",{onSubmit:w,className:"space-y-3",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-1",children:e.jsx("textarea",{value:i,onChange:y=>p(y.target.value),placeholder:`ä½œä¸º${r.solutionRole}ï¼Œè¯·æä¾›æ‚¨çš„ä¸“ä¸šå»ºè®®...`,className:"input-field resize-none transition-all duration-200 focus:shadow-md",rows:3,disabled:o||s})}),e.jsx("div",{className:"flex flex-col justify-end",children:e.jsx("button",{type:"submit",disabled:!i.trim()||o||s,className:"btn-primary p-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none transition-all duration-200 hover:scale-105",title:"å‘é€è§£å†³æ–¹æ¡ˆ",children:e.jsx(ee,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"button",onClick:u,disabled:s||!t||t.length===0,className:"flex-1 px-3 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",title:"AIç”Ÿæˆå»ºè®®",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-purple-400 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"ç”Ÿæˆä¸­..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:"ç”Ÿæˆç›¸åº”å»ºè®®"})]})}),e.jsx("button",{type:"button",onClick:m,disabled:s||!t||t.length===0,className:"flex-1 px-3 py-2 bg-orange-100 hover:bg-orange-200 text-orange-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",title:"AIç”Ÿæˆè¿½é—®",children:s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-orange-400 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"ç”Ÿæˆä¸­..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:"ç”Ÿæˆç›¸åº”è¿½é—®"})]})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"ðŸ’¡ åŸºäºŽLLMä¸­ä»‹çš„åˆ†æžç»“æžœæä¾›è§£å†³æ–¹æ¡ˆ"})})]})})]})},Pe=()=>{const[r,t]=x.useState([]),a=x.useCallback(n=>{const u=Date.now()+Math.random(),m={id:u,type:"info",duration:5e3,...n};t(j=>[...j,m]),m.duration>0&&setTimeout(()=>{o(u)},m.duration)},[]),o=x.useCallback(n=>{t(u=>u.filter(m=>m.id!==n))},[]);x.useEffect(()=>{window.showNotification=a},[a]);const s=n=>{switch(n){case"success":return e.jsx(W,{className:"w-5 h-5 text-green-600"});case"error":return e.jsx(ye,{className:"w-5 h-5 text-red-600"});case"warning":return e.jsx(fe,{className:"w-5 h-5 text-yellow-600"});default:return e.jsx(Ne,{className:"w-5 h-5 text-blue-600"})}},c=n=>{switch(n){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";default:return"bg-blue-50 border-blue-200 text-blue-800"}};return r.length===0?null:e.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:r.map(n=>e.jsx("div",{className:`max-w-sm w-full border rounded-lg p-4 shadow-lg transition-all duration-300 transform translate-x-0 ${c(n.type)}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[s(n.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[n.title&&e.jsx("h4",{className:"text-sm font-medium mb-1",children:n.title}),e.jsx("p",{className:"text-sm",children:n.message})]}),e.jsx("button",{onClick:()=>o(n.id),className:"flex-shrink-0 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(te,{className:"w-4 h-4"})})]})},n.id))})},se=(r,t="info",a={})=>{window.showNotification&&window.showNotification({message:r,type:t,...a})},Oe=(r,t={})=>{se(r,"success",t)},$e=(r,t={})=>{se(r,"info",t)},Ue=({isOpen:r,onClose:t,settings:a,onUpdateSettings:o})=>{const[s,c]=x.useState(a),n=x.useRef(null);x.useEffect(()=>{c(a)},[a]),x.useEffect(()=>{const d=i=>{n.current&&!n.current.contains(i.target)&&r&&t()};return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[r,t]);const u=(d,i)=>{c(p=>({...p,[d]:i}))},m=()=>{o(s),Oe("è®¾ç½®å·²ä¿å­˜",{duration:2e3}),t()},j=()=>{const d={darkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,fontSize:"medium",soundEnabled:!0,autoScroll:!0,showTimestamps:!0,language:"zh-CN",apiEndpoint:"https://api.example.com/v1",maxMessagesPerPanel:50};c(d)};return r?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{ref:n,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md mx-4 overflow-hidden transition-all duration-300 transform scale-100",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ve,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"è®¾ç½®"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300 transition-colors",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"px-6 py-4 max-h-[70vh] overflow-y-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"å¤–è§‚"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s.darkMode?e.jsx(ke,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}):e.jsx(Ee,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"æ·±è‰²æ¨¡å¼"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.darkMode,onChange:d=>u("darkMode",d.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"å­—ä½“å¤§å°"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:s.fontSize})]}),e.jsxs("select",{value:s.fontSize,onChange:d=>u("fontSize",d.target.value),className:"block w-full px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"small",children:"å°"}),e.jsx("option",{value:"medium",children:"ä¸­"}),e.jsx("option",{value:"large",children:"å¤§"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"è¡Œä¸º"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[s.soundEnabled?e.jsx(Me,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}):e.jsx(_e,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"å£°éŸ³æç¤º"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.soundEnabled,onChange:d=>u("soundEnabled",d.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"è‡ªåŠ¨æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.autoScroll,onChange:d=>u("autoScroll",d.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"æ˜¾ç¤ºæ¶ˆæ¯æ—¶é—´æˆ³"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:s.showTimestamps,onChange:d=>u("showTimestamps",d.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"é«˜çº§è®¾ç½®"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-2",children:"è¯­è¨€"}),e.jsxs("select",{value:s.language,onChange:d=>u("language",d.target.value),className:"block w-full px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[e.jsx("option",{value:"zh-CN",children:"ç®€ä½“ä¸­æ–‡"}),e.jsx("option",{value:"en-US",children:"English (US)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300 mb-2",children:"APIç«¯ç‚¹"}),e.jsx("input",{type:"text",value:s.apiEndpoint,onChange:d=>u("apiEndpoint",d.target.value),className:"block w-full px-3 py-2 text-sm bg-gray-50 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"https://api.example.com/v1"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm text-gray-700 dark:text-gray-300",children:"æ¯ä¸ªé¢æ¿æœ€å¤§æ¶ˆæ¯æ•°"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:s.maxMessagesPerPanel})]}),e.jsx("input",{type:"range",min:"10",max:"100",step:"10",value:s.maxMessagesPerPanel,onChange:d=>u("maxMessagesPerPanel",parseInt(d.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"})]})]})]})]})}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 dark:bg-gray-750 border-t border-gray-200 dark:border-gray-700 flex justify-between",children:[e.jsx("button",{onClick:j,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-650",children:"é‡ç½®"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-650",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:m,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 dark:bg-primary-700 dark:hover:bg-primary-600",children:"ä¿å­˜"})]})]})]})}):null},ze=({onClearMessages:r,onToggleSettings:t,onFocusInput:a})=>(x.useEffect(()=>{const o=s=>{const c=s.ctrlKey||s.metaKey;s.shiftKey,s.altKey;const n=["INPUT","TEXTAREA"].includes(s.target.tagName);if(c&&s.key==="k"&&!n){s.preventDefault(),r(),$e("å·²æ¸…ç©ºæ‰€æœ‰æ¶ˆæ¯",{duration:2e3});return}if(c&&s.key===","&&!n){s.preventDefault(),t();return}if(c&&s.key==="/"&&!n){s.preventDefault(),X();return}if(c&&s.key==="1"&&!n){s.preventDefault(),a("problem");return}if(c&&s.key==="3"&&!n){s.preventDefault(),a("solution");return}if(s.key==="Escape"){document.querySelectorAll("[data-modal]").forEach(m=>{m.style.display!=="none"&&(m.style.display="none")});return}if(s.key==="F1"){s.preventDefault(),X();return}};return document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}},[r,t,a]),null),X=()=>{const r=[{key:"Ctrl/Cmd + K",description:"æ¸…ç©ºæ‰€æœ‰æ¶ˆæ¯"},{key:"Ctrl/Cmd + ,",description:"æ‰“å¼€è®¾ç½®"},{key:"Ctrl/Cmd + /",description:"æ˜¾ç¤ºå¿«æ·é”®å¸®åŠ©"},{key:"Ctrl/Cmd + 1",description:"èšç„¦åˆ°é—®é¢˜ç«¯è¾“å…¥æ¡†"},{key:"Ctrl/Cmd + 3",description:"èšç„¦åˆ°æ–¹æ¡ˆç«¯è¾“å…¥æ¡†"},{key:"Esc",description:"å–æ¶ˆå½“å‰æ“ä½œ"},{key:"F1",description:"æ˜¾ç¤ºå¸®åŠ©"}];r.map(a=>`${a.key}: ${a.description}`).join(`
`);const t=document.createElement("div");t.setAttribute("data-modal","shortcuts-help"),t.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",t.innerHTML=`
    <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-gray-900">é”®ç›˜å¿«æ·é”®</h3>
        <button class="text-gray-400 hover:text-gray-600" onclick="this.closest('[data-modal]').remove()">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      <div class="space-y-3">
        ${r.map(a=>`
          <div class="flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0">
            <span class="text-sm text-gray-600">${a.description}</span>
            <kbd class="px-2 py-1 text-xs font-mono bg-gray-100 rounded border">${a.key}</kbd>
          </div>
        `).join("")}
      </div>
      <div class="mt-6 text-center">
        <button 
          class="px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"
          onclick="this.closest('[data-modal]').remove()"
        >
          å…³é—­
        </button>
      </div>
    </div>
  `,t.addEventListener("click",a=>{a.target===t&&t.remove()}),document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&t.remove()},1e4)},T={MODELSCOPE_API_URL:{}.VITE_MODELSCOPE_API_URL||"https://api-inference.modelscope.cn/v1",MODELSCOPE_API_KEY:{}.VITE_MODELSCOPE_API_KEY||"ms-150d583e-ed00-46d3-ab35-570f03555599",DEEPBRICKS_API_URL:{}.VITE_DEEPBRICKS_API_URL||"https://api.deepbricks.ai/v1/",DEEPBRICKS_MODEL:{}.VITE_DEEPBRICKS_MODEL||"GPT-5-Chat",DEEPBRICKS_API_KEY:{}.VITE_DEEPBRICKS_API_KEY||"sk-lNVAREVHjj386FDCd9McOL7k66DZCUkTp6IbV0u9970qqdlg",APP_TITLE:{}.VITE_APP_TITLE||"ZeroTouch AIä¸­ä»‹æœåŠ¡",APP_VERSION:{}.VITE_APP_VERSION||"2.0.0",NODE_ENV:{}.NODE_ENV||"development",PORT:{}.PORT||3e3,ENABLE_DEBUG:{}.VITE_ENABLE_DEBUG==="true",ENABLE_SOUND:{}.VITE_ENABLE_SOUND!=="false",ENABLE_AUTO_SCROLL:{}.VITE_ENABLE_AUTO_SCROLL!=="false",MAX_MESSAGE_LENGTH:parseInt({}.VITE_MAX_MESSAGE_LENGTH)||2e3,REQUEST_TIMEOUT:parseInt({}.VITE_REQUEST_TIMEOUT)||3e4,IS_DEVELOPMENT:!1,IS_PRODUCTION:!0},O={baseURL:T.DEEPBRICKS_API_URL||"https://api.deepbricks.ai/v1/",model:T.DEEPBRICKS_MODEL||"GPT-5-Chat",apiKey:T.DEEPBRICKS_API_KEY||"sk-lNVAREVHjj386FDCd9McOL7k66DZCUkTp6IbV0u9970qqdlg"},D=(r,t=2e3)=>typeof r!="string"||r.length<=t?r:r.slice(0,t)+"â€¦(truncated)",Ve=r=>{try{return r.map(t=>({role:t.role,content:D(t.content)}))}catch{return"[unserializable messages]"}},U=async(r,t=.7)=>{var a,o,s,c,n,u,m,j;try{const d=typeof import.meta<"u"&&{BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&!1;if(console.groupCollapsed("[LLM] Request"),console.log("model:",O.model),console.log("temperature:",t),console.log("messages:",Ve(r)),console.time("[LLM] latency"),d){console.group("[LLM] Full Prompt");try{const h=r.map((g,N)=>`#${N+1} [${g.role}]
${g.content}`).join(`

---

`);console.log(h)}catch{}try{console.log("messages JSON:",JSON.stringify(r,null,2))}catch{}console.groupEnd()}const i=await fetch(`${O.baseURL}chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O.apiKey}`},body:JSON.stringify({model:O.model,messages:r,temperature:t,max_tokens:2e3,stream:!1})});if(!i.ok)throw console.timeEnd("[LLM] latency"),console.log("status:",i.status,i.statusText),new Error(`APIè°ƒç”¨å¤±è´¥: ${i.status} ${i.statusText}`);const p=await i.json(),f=(s=(o=(a=p==null?void 0:p.choices)==null?void 0:a[0])==null?void 0:o.message)==null?void 0:s.content;if(console.timeEnd("[LLM] latency"),p!=null&&p.usage&&console.log("usage:",p.usage),console.log("responseMessage:",D(f)),d){console.group("[LLM] Raw Response");try{console.log("raw JSON:",JSON.stringify(p,null,2))}catch{}try{console.log("raw message:",JSON.stringify((n=(c=p==null?void 0:p.choices)==null?void 0:c[0])==null?void 0:n.message,null,2))}catch{}try{console.log("raw content:",(j=(m=(u=p==null?void 0:p.choices)==null?void 0:u[0])==null?void 0:m.message)==null?void 0:j.content)}catch{}console.groupEnd()}return console.groupEnd(),f}catch(d){try{console.groupEnd()}catch{}throw console.groupCollapsed("[LLM] Error"),console.error("é­”æ­APIè°ƒç”¨é”™è¯¯:",d),console.groupEnd(),d}},z=r=>{if(!r)return r;const t=["éžå¸¸æŠ±æ­‰","æŠ±æ­‰","æˆ‘æœªèƒ½ç†è§£","è¯·æ‚¨è¯¦ç»†æè¿°","è¯·æä¾›æ›´å¤šä¿¡æ¯","ä¿¡æ¯ä¸è¶³","è‹¥æœ‰ä¸ç¬¦è¯·æŒ‡æ­£","ä½ å¥½ï¼å¾ˆé«˜å…´èƒ½å¸®åŠ©ä½ ã€‚","è¯·é—®ä½ çŽ°åœ¨æ˜¯åœ¨å¯»æ‰¾ä»€ä¹ˆç±»åž‹çš„å•†å“","è¡£æœã€éž‹å­è¿˜æ˜¯å…¶ä»–ä»€ä¹ˆå°ç‰©ä»¶","æ„Ÿè°¢æ‚¨çš„åé¦ˆ","æˆ‘ä»¬éžå¸¸é‡è§†","å¦‚æžœæ‚¨æœ‰ä»»ä½•é—®é¢˜","å¦‚éœ€.*å¸®åŠ©","è¯·éšæ—¶è”ç³»","å®¢æœå›¢é˜Ÿ","æ”¯æŒå›¢é˜Ÿ","ä¸ºæ‚¨æä¾›æ»¡æ„çš„è§£å†³æ–¹æ¡ˆ","æˆ‘ä»¬ä¼šå°½åŠ›.*è§£å†³","æ•¬è¯·è°…è§£","å¿½ç•¥æœ¬æ¬¡å¯¹è¯","ç»§ç»­æµè§ˆå…¶ä»–æœåŠ¡æˆ–ä¿¡æ¯","æ¬¢è¿Ž.*è”ç³»æˆ‘ä»¬"];let a=r;return t.forEach(o=>{const s=new RegExp(o,"g");a=a.replace(s,"")}),a.trim()},B=(r,t)=>{for(const a of t){const o=r.indexOf(a);if(o!==-1)return{idx:o,keyword:a}}return{idx:-1,keyword:""}},Be=r=>{const t=typeof r=="string"?r:"",a={translation:"",solutionsText:"",confirmationsText:""},o=["ã€éœ€æ±‚è½¬è¯‘ã€‘","ã€éœ€æ±‚ç¿»è¯‘ã€‘","ã€è½¬è¯‘ç»“æžœã€‘","ã€éœ€æ±‚æ¾„æ¸…ã€‘","éœ€æ±‚è½¬è¯‘","éœ€æ±‚ç¿»è¯‘","è½¬è¯‘ç»“æžœ","éœ€æ±‚æ¾„æ¸…","å®¢æˆ·éœ€æ±‚è½¬è¯‘","ç”¨æˆ·éœ€æ±‚è½¬è¯‘"],s=["ã€è§£å†³æ–¹æ¡ˆå»ºè®®ã€‘","ã€å»ºè®®æ–¹æ¡ˆã€‘","ã€è¡ŒåŠ¨å»ºè®®ã€‘","è§£å†³æ–¹æ¡ˆå»ºè®®","å»ºè®®çš„è§£å†³æ–¹æ¡ˆ","æ–¹æ¡ˆå»ºè®®","è¡ŒåŠ¨å»ºè®®"],c=["ã€å¾…ç¡®è®¤ä¿¡æ¯ã€‘","ã€éœ€ç¡®è®¤ä¿¡æ¯ã€‘","ã€å¾…ç¡®è®¤ã€‘","å¾…ç¡®è®¤ä¿¡æ¯","éœ€ç¡®è®¤ä¿¡æ¯"],n=B(t,o),u=B(t,s),m=B(t,c),j=d=>{if(d===-1)return t.length;const i=[u.idx,m.idx,t.length].filter(p=>p!==-1&&p>d);return Math.min(...i)};if(n.idx!==-1){const d=n.idx+n.keyword.length,i=j(n.idx);a.translation=t.slice(d,i).trim()}else u.idx!==-1&&(a.translation=t.slice(0,u.idx).trim());if(u.idx!==-1){const d=u.idx+u.keyword.length,i=m.idx!==-1?m.idx:t.length;a.solutionsText=t.slice(d,i).trim()}if(m.idx!==-1){const d=m.idx+m.keyword.length;a.confirmationsText=t.slice(d).trim()}if(!a.translation){const d=u.idx!==-1?u.idx:t.search(/\n?\s*(æ–¹æ¡ˆ|é€‰é¡¹|å»ºè®®)\s*[1-9]/);if(d!==-1&&d>0)a.translation=t.slice(0,d).trim();else{const i=t.slice(0,500),p=i.split(/\n{2,}/);a.translation=(p[0]||i).trim()}}return a},qe=async(r,t,a,o=[])=>{try{const s={retail:{systemRole:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIæ²Ÿé€šåŠ©æ‰‹ï¼Œä¸“é—¨åœ¨é¡¾å®¢ä¸Žä¼ä¸šé—¨åº—ä¹‹é—´æä¾›ç²¾å‡†çš„éœ€æ±‚è½¬è¯‘å’Œè§£å†³æ–¹æ¡ˆå»ºè®®ã€‚ä½ çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š1)å‡†ç¡®ç†è§£é¡¾å®¢çš„çœŸå®žéœ€æ±‚å’Œæ½œåœ¨æ„å›¾ 2)å°†å…¶è½¬åŒ–ä¸ºä¼ä¸šèƒ½å¤Ÿç†è§£å’Œæ‰§è¡Œçš„ä¸“ä¸šæè¿° 3)åŸºäºŽä¼ä¸šèƒ½åŠ›æä¾›å…·ä½“å¯è¡Œçš„è§£å†³æ–¹æ¡ˆé€‰é¡¹ã€‚",context:`åœºæ™¯è¾¹ç•Œï¼šé›¶å”®é¡¾å®¢-é—¨åº—æ²Ÿé€šã€‚ä½ éœ€è¦åŒæ—¶ç†è§£åŒæ–¹å¯èƒ½å­˜åœ¨çš„è¡¨è¾¾åå·®ï¼šé¡¾å®¢å¯èƒ½è¡¨è¾¾ä¸æ¸…æ™°æˆ–æœ‰éšå«éœ€æ±‚ï¼Œä¼ä¸šå¯èƒ½ç”¨ä¸“ä¸šæœ¯è¯­å›žå¤ã€‚

æ ¸å¿ƒä»»åŠ¡ï¼š
1. æ·±åº¦ç†è§£ï¼šåˆ†æžé¡¾å®¢çš„æ˜¾æ€§éœ€æ±‚å’Œéšæ€§éœ€æ±‚ï¼Œè¯†åˆ«å¯èƒ½çš„è¡¨è¾¾åå·®
2. ç²¾å‡†è½¬è¯‘ï¼šå°†é¡¾å®¢éœ€æ±‚è½¬åŒ–ä¸ºåŒ…å«äº§å“ç±»åž‹ã€ä½¿ç”¨åœºæ™¯ã€é¢„ç®—èŒƒå›´ã€è§„æ ¼è¦æ±‚ç­‰å…³é”®ä¿¡æ¯çš„ä¸“ä¸šæè¿°
3. æ–¹æ¡ˆå»ºè®®ï¼šåŸºäºŽè½¬è¯‘ç»“æžœï¼Œä¸ºä¼ä¸šæä¾›2-3ä¸ªå…·ä½“å¯è¡Œçš„è§£å†³æ–¹æ¡ˆé€‰é¡¹ï¼ŒåŒ…å«äº§å“æŽ¨èã€æœåŠ¡å»ºè®®ã€ä»·æ ¼åŒºé—´ç­‰
4. ä¸å½“è¾“å…¥å¤„ç†ï¼šé‡åˆ°æƒ…ç»ªåŒ–ã€ç²—é²æˆ–ä¸å½“è¡¨è¾¾æ—¶ï¼Œé¿å…ç›´æŽ¥é‡å¤åŽŸè¯ï¼Œè½¬åŒ–ä¸ºä¸“ä¸šçš„æœåŠ¡å¯¼å‘åˆ†æž`,example:`ä¾‹å¦‚ï¼šé¡¾å®¢è¯´"æˆ‘éœ€è¦ä¸€ä»¶é€‚åˆå•†åŠ¡åœºåˆçš„è¡£æœ" â†’ è½¬è¯‘ï¼š"é¡¾å®¢éœ€è¦å•†åŠ¡æ­£è£…ï¼Œç”¨äºŽé‡è¦ä¼šè®®ï¼Œé¢„ç®—å¾…ç¡®è®¤ï¼Œéœ€è¦ä¸“ä¸šå½¢è±¡" â†’ æ–¹æ¡ˆå»ºè®®ï¼š"1)æŽ¨èç»å…¸å•†åŠ¡è¥¿è£…å¥—è£…ï¼Œä»·æ ¼800-1500å…ƒï¼ŒåŒ…å«å…è´¹ä¿®æ”¹æœåŠ¡ 2)æŽ¨èå•†åŠ¡ä¼‘é—²è£…ï¼Œä»·æ ¼500-800å…ƒï¼Œé€‚åˆæ—¥å¸¸å•†åŠ¡åœºåˆ 3)æä¾›ä¸ªäººå½¢è±¡é¡¾é—®æœåŠ¡ï¼Œæ ¹æ®å…·ä½“éœ€æ±‚å®šåˆ¶æ­é…æ–¹æ¡ˆ"

å¼‚å¸¸æƒ…å†µå¤„ç†ï¼šé‡åˆ°ä¸å½“æˆ–æƒ…ç»ªåŒ–è¡¨è¾¾ â†’ è½¬è¯‘ï¼š"é¡¾å®¢æƒ…ç»ªè¾ƒä¸ºæ¿€åŠ¨ï¼Œå¯èƒ½å¯¹æœåŠ¡ä½“éªŒå­˜åœ¨ä¸æ»¡ï¼Œå»ºè®®é—¨åº—ä¼˜å…ˆè¿›è¡Œæƒ…ç»ªå®‰æŠšå’Œé—®é¢˜äº†è§£" â†’ æ–¹æ¡ˆå»ºè®®ï¼š"1)å®‰æŽ’ä¸“ä¸šæœåŠ¡äººå‘˜è¿›è¡Œä¸€å¯¹ä¸€æ²Ÿé€š 2)äº†è§£å…·ä½“é—®é¢˜å¹¶æä¾›é’ˆå¯¹æ€§è§£å†³æ–¹æ¡ˆ 3)æä¾›é¢å¤–çš„æœåŠ¡è¡¥å¿æˆ–ä¼˜æƒ æŽªæ–½"`},enterprise:{systemRole:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIæ²Ÿé€šåŠ©æ‰‹ï¼Œä¸“é—¨åœ¨ä¼ä¸šè·¨éƒ¨é—¨ä¹‹é—´æä¾›ç²¾å‡†çš„éœ€æ±‚è½¬è¯‘å’Œè§£å†³æ–¹æ¡ˆå»ºè®®ã€‚ä½ çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š1)å‡†ç¡®ç†è§£ä¸šåŠ¡éƒ¨é—¨çš„éœ€æ±‚å’ŒæŠ€æœ¯éƒ¨é—¨çš„èƒ½åŠ›è¾¹ç•Œ 2)æ¶ˆé™¤éƒ¨é—¨é—´çš„æ²Ÿé€šåå·® 3)æä¾›å…·ä½“å¯è¡Œçš„æŠ€æœ¯è§£å†³æ–¹æ¡ˆé€‰é¡¹ã€‚",context:`åœºæ™¯è¾¹ç•Œï¼šä¼ä¸šå†…éƒ¨è·¨éƒ¨é—¨æ²Ÿé€šã€‚ä½ éœ€è¦ç†è§£ä¸åŒéƒ¨é—¨çš„è¯­è¨€å·®å¼‚ï¼šä¸šåŠ¡éƒ¨é—¨å…³æ³¨æ•ˆæžœå’Œæ—¶é—´ï¼ŒæŠ€æœ¯éƒ¨é—¨å…³æ³¨å¯è¡Œæ€§å’Œèµ„æºã€‚

æ ¸å¿ƒä»»åŠ¡ï¼š
1. éœ€æ±‚è§£æžï¼šå°†ä¸šåŠ¡éœ€æ±‚è½¬åŒ–ä¸ºæŠ€æœ¯å¯ç†è§£çš„åŠŸèƒ½è¦æ±‚ï¼ŒåŒ…å«å…·ä½“æŒ‡æ ‡ã€æ—¶é—´æœŸé™ã€èµ„æºçº¦æŸ
2. æ–¹æ¡ˆè®¾è®¡ï¼šåŸºäºŽæŠ€æœ¯èƒ½åŠ›æä¾›2-3ä¸ªä¸åŒå¤æ‚åº¦çš„è§£å†³æ–¹æ¡ˆé€‰é¡¹
3. é£Žé™©è¯„ä¼°ï¼šè¯†åˆ«å®žæ–½è¿‡ç¨‹ä¸­å¯èƒ½çš„æŠ€æœ¯é£Žé™©å’Œèµ„æºéœ€æ±‚`,example:'ä¾‹å¦‚ï¼šå¸‚åœºéƒ¨è¯´"æˆ‘ä»¬éœ€è¦æå‡ç”¨æˆ·ä½“éªŒ" â†’ è½¬è¯‘ï¼š"éœ€è¦å¼€å‘ç”¨æˆ·ä½“éªŒä¼˜åŒ–åŠŸèƒ½ï¼Œç›®æ ‡æå‡ç”¨æˆ·ç•™å­˜çŽ‡ï¼Œæ—¶é—´3ä¸ªæœˆå†…" â†’ æ–¹æ¡ˆå»ºè®®ï¼š"1)å¿«é€Ÿæ–¹æ¡ˆï¼šä¼˜åŒ–çŽ°æœ‰ç•Œé¢å’Œäº¤äº’ï¼Œé¢„è®¡æå‡10%ç•™å­˜çŽ‡ï¼Œéœ€è¦2å‘¨ï¼Œæˆæœ¬5ä¸‡ 2)ä¸­ç­‰æ–¹æ¡ˆï¼šé‡æ–°è®¾è®¡æ ¸å¿ƒæµç¨‹ï¼Œé¢„è®¡æå‡25%ç•™å­˜çŽ‡ï¼Œéœ€è¦6å‘¨ï¼Œæˆæœ¬15ä¸‡ 3)æ·±åº¦æ–¹æ¡ˆï¼šå…¨é¢é‡æž„ç”¨æˆ·ä½“éªŒï¼Œé¢„è®¡æå‡40%ç•™å­˜çŽ‡ï¼Œéœ€è¦3ä¸ªæœˆï¼Œæˆæœ¬40ä¸‡"'},education:{systemRole:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIæ•™å­¦åŠ©æ‰‹ï¼Œä¸“é—¨åœ¨å­¦ç”Ÿä¸Žæ•™å¸ˆä¹‹é—´æä¾›ç²¾å‡†çš„å­¦ä¹ éœ€æ±‚è½¬è¯‘å’Œæ•™å­¦æ–¹æ¡ˆå»ºè®®ã€‚ä½ çš„æ ¸å¿ƒèŒè´£æ˜¯ï¼š1)æ·±åº¦ç†è§£å­¦ç”Ÿçš„å­¦ä¹ å›°éš¾å’ŒçŸ¥è¯†ç›²ç‚¹ 2)å°†å…¶è½¬åŒ–ä¸ºæ•™å¸ˆå¯æ“ä½œçš„æ•™å­¦è¦ç‚¹ 3)æä¾›å¤šæ ·åŒ–çš„æ•™å­¦è§£å†³æ–¹æ¡ˆé€‰é¡¹ã€‚",context:`åœºæ™¯è¾¹ç•Œï¼šå¸ˆç”Ÿäº’åŠ¨çš„å­¦ä¹ æ²Ÿé€šã€‚ä½ éœ€è¦ç†è§£å­¦ä¹ è¿‡ç¨‹ä¸­çš„è®¤çŸ¥åå·®ï¼šå­¦ç”Ÿå¯èƒ½æ— æ³•å‡†ç¡®è¡¨è¾¾å›°éš¾ç‚¹ï¼Œæ•™å¸ˆå¯èƒ½ç”¨è¿‡äºŽä¸“ä¸šçš„è¯­è¨€å›žå¤ã€‚

æ ¸å¿ƒä»»åŠ¡ï¼š
1. å­¦ä¹ è¯Šæ–­ï¼šåˆ†æžå­¦ç”Ÿçš„å…·ä½“å›°éš¾ç‚¹ã€çŸ¥è¯†èƒŒæ™¯ã€å­¦ä¹ é£Žæ ¼
2. æ•™å­¦è½¬è¯‘ï¼šå°†å­¦ä¹ éœ€æ±‚è½¬åŒ–ä¸ºåŒ…å«çŸ¥è¯†ç‚¹ã€éš¾ç‚¹åˆ†æžã€æ•™å­¦ç›®æ ‡çš„ä¸“ä¸šæè¿°
3. æ–¹æ¡ˆå»ºè®®ï¼šæä¾›2-3ç§ä¸åŒæ•™å­¦æ–¹æ³•çš„å…·ä½“å®žæ–½æ–¹æ¡ˆ`,example:'ä¾‹å¦‚ï¼šå­¦ç”Ÿè¯´"æˆ‘ä¸æ‡‚è¿™ä¸ªæ¦‚å¿µ" â†’ è½¬è¯‘ï¼š"å­¦ç”Ÿå¯¹é‡å­ç‰©ç†æ³¢ç²’äºŒè±¡æ€§æ¦‚å¿µç†è§£å›°éš¾ï¼Œéœ€è¦ä»ŽåŸºç¡€æ¦‚å¿µå¼€å§‹ï¼Œé€šè¿‡å®žéªŒä¾‹å­å»ºç«‹è®¤çŸ¥" â†’ æ–¹æ¡ˆå»ºè®®ï¼š"1)å®žéªŒæ¼”ç¤ºæ³•ï¼šé€šè¿‡åŒç¼å®žéªŒç­‰ç»å…¸å®žéªŒï¼Œç›´è§‚å±•ç¤ºæ³¢ç²’äºŒè±¡æ€§ï¼Œé€‚åˆè§†è§‰å­¦ä¹ è€… 2)ç±»æ¯”æ•™å­¦æ³•ï¼šç”¨æ°´æ³¢å’Œå¼¹ç çš„ç±»æ¯”ï¼Œå¸®åŠ©ç†è§£æŠ½è±¡æ¦‚å¿µï¼Œé€‚åˆé€»è¾‘æ€ç»´å¼ºçš„å­¦ç”Ÿ 3)æ¸è¿›å¼æ•™å­¦ï¼šä»Žå…‰çš„åŸºæœ¬æ€§è´¨å¼€å§‹ï¼Œé€æ­¥å¼•å…¥é‡å­æ¦‚å¿µï¼Œé€‚åˆåŸºç¡€è¾ƒå¼±çš„å­¦ç”Ÿ"'}};if(!a||!s[a])throw new Error(`æ— æ•ˆçš„åœºæ™¯ç±»åž‹: ${a}ã€‚æ”¯æŒçš„åœºæ™¯: ${Object.keys(s).join(", ")}`);const c=s[a];let n="";o&&o.length>0&&(n=`

èŠå¤©åŽ†å²ä¸Šä¸‹æ–‡ï¼š
`+o.slice(-6).map((f,h)=>{let g="AIå¤„ç†";return f.type==="user"?f.panel==="problem"?g=a==="retail"?"é¡¾å®¢åŽŸè¯":a==="enterprise"?"å¸‚åœºéƒ¨åŽŸè¯":"å­¦ç”ŸåŽŸè¯":f.panel==="solution"?g=a==="retail"?"é—¨åº—äººå‘˜åŽŸè¯":a==="enterprise"?"ç ”å‘éƒ¨åŽŸè¯":"æ•™å¸ˆåŽŸè¯":g=a==="retail"?"é¡¾å®¢åŽŸè¯":a==="enterprise"?"å¸‚åœºéƒ¨åŽŸè¯":"å­¦ç”ŸåŽŸè¯":f.type==="llm_request"?g=a==="retail"?"é—¨åº—å®žé™…çœ‹åˆ°":a==="enterprise"?"ç ”å‘éƒ¨å®žé™…çœ‹åˆ°":"æ•™å¸ˆå®žé™…çœ‹åˆ°":f.type==="ai_response"?g=a==="retail"?"é¡¾å®¢å®žé™…çœ‹åˆ°":a==="enterprise"?"å¸‚åœºéƒ¨å®žé™…çœ‹åˆ°":"å­¦ç”Ÿå®žé™…çœ‹åˆ°":f.type==="llm_processing"&&(g="AIç¿»è¯‘è¾“å‡º"),`${h+1}. ${g}: ${f.text}`}).join(`
`));const u=[{role:"system",content:`${c.systemRole}

${c.context}

${c.example}

å¢žå¼ºæŒ‡ä»¤ï¼š
1. ä¸Šä¸‹æ–‡ç†è§£ï¼šå……åˆ†åˆ©ç”¨èŠå¤©åŽ†å²ï¼Œç†è§£å¯¹è¯çš„å®Œæ•´èƒŒæ™¯å’Œå®¢æˆ·çš„çœŸå®žéœ€æ±‚
2. æ·±åº¦ä¼˜åŒ–ï¼šä¸ä»…è½¬åŒ–è¯­è¨€ï¼Œæ›´è¦ä¼˜åŒ–å†…å®¹ç»“æž„ï¼Œç¡®ä¿å®¢æˆ·èŽ·å¾—æœ€å¤§ä»·å€¼
3. è¡ŒåŠ¨å¯¼å‘ï¼šæä¾›å…·ä½“çš„ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®ï¼Œå¸®åŠ©å®¢æˆ·åšå‡ºæ˜Žæ™ºå†³ç­–
4. ä½“éªŒæå‡ï¼šç¡®ä¿å›žå¤å‹å¥½ã€ä¸“ä¸šã€æœ‰æ¸©åº¦ï¼Œæå‡æ•´ä½“æ²Ÿé€šä½“éªŒ
5. ä»·å€¼ä¼ é€’ï¼šæ¸…æ™°ä¼ è¾¾æ–¹æ¡ˆçš„ä»·å€¼å’Œå¥½å¤„ï¼Œå¸®åŠ©å®¢æˆ·ç†è§£é€‰æ‹©çš„æ„ä¹‰
6. é£Žé™©é¢„é˜²ï¼šè¯†åˆ«å¯èƒ½çš„è¯¯è§£æˆ–ç–‘è™‘ï¼Œä¸»åŠ¨æä¾›æ¾„æ¸…å’Œä¿éšœ
7. é£Žæ ¼é™åˆ¶ï¼šä¸¥æ ¼ç¦æ­¢è¾“å‡ºä»»ä½•å®¢æœè¯æœ¯æˆ–æ¨¡æ¿åŒ–è¡¨è¾¾ï¼ˆå¦‚"æ„Ÿè°¢æ‚¨çš„åé¦ˆ/æˆ‘ä»¬éžå¸¸é‡è§†/å¦‚éœ€å¸®åŠ©è¯·è”ç³»/è”ç³»æˆ‘ä»¬çš„å®¢æœå›¢é˜Ÿ/ä¸ºæ‚¨æä¾›æ»¡æ„çš„è§£å†³æ–¹æ¡ˆ/æ•¬è¯·è°…è§£/å¿½ç•¥æœ¬æ¬¡å¯¹è¯/ç»§ç»­æµè§ˆ"ç­‰ï¼‰ï¼Œç¦æ­¢é“æ­‰æˆ–è‡´è°¢å¥—è¯ï¼›åªå›´ç»•å½“å‰åœºæ™¯å†…å®¹è¿›è¡Œäº‹å®žæ€§ä¸Žå¯æ‰§è¡Œæ€§è¡¨è¿°ï¼Œä¸è¾“å‡ºè”ç³»æ¸ é“æˆ–å¹³å°æ”¿ç­–ä¿¡æ¯ã€‚
8. ä¸å½“è¾“å…¥å¤„ç†ï¼šé‡åˆ°ç²—é²ã€æƒ…ç»ªåŒ–æˆ–ä¸å½“è¡¨è¾¾æ—¶ï¼Œä¸¥ç¦ç›´æŽ¥é‡å¤æˆ–å¼•ç”¨åŽŸå§‹å†…å®¹ï¼Œå¿…é¡»ä»¥ä¸“ä¸šæ–¹å¼åˆ†æžæ½œåœ¨éœ€æ±‚ï¼Œè½¬åŒ–ä¸ºå»ºè®¾æ€§çš„æœåŠ¡æŒ‡å¯¼å’Œè§£å†³æ–¹æ¡ˆå»ºè®®ã€‚
9. æƒ…ç»ªè½¬åŒ–åŽŸåˆ™ï¼šå°†è´Ÿé¢æƒ…ç»ªè¯†åˆ«ä¸ºæœåŠ¡æ”¹è¿›æœºä¼šï¼Œé‡ç‚¹åˆ†æžå®¢æˆ·å¯èƒ½çš„å®žé™…éœ€æ±‚å’ŒæœŸæœ›ï¼Œæä¾›ç§¯æžçš„è§£å†³è·¯å¾„ã€‚`},{role:"user",content:`å½“å‰ç”¨æˆ·è¾“å…¥ï¼š"${r}"${t?`
ï¼ˆç”¨æˆ·è¿˜ä¸Šä¼ äº†ä¸€å¼ å›¾ç‰‡ï¼‰`:""}${n}

è¯·æŒ‰ç…§ä»¥ä¸‹ç»“æž„è¾“å‡ºï¼š

ã€éœ€æ±‚è½¬è¯‘ã€‘
å°†ç”¨æˆ·éœ€æ±‚è½¬åŒ–ä¸ºä¸“ä¸šã€å…·ä½“çš„æè¿°ï¼ŒåŒ…å«æ‰€æœ‰å…³é”®ä¿¡æ¯

ã€è§£å†³æ–¹æ¡ˆå»ºè®®ã€‘
åŸºäºŽè½¬è¯‘ç»“æžœï¼Œæä¾›2-3ä¸ªå…·ä½“å¯è¡Œçš„è§£å†³æ–¹æ¡ˆé€‰é¡¹ï¼š
æ–¹æ¡ˆ1ï¼š[å…·ä½“æ–¹æ¡ˆæè¿°ï¼ŒåŒ…å«å®žæ–½å»ºè®®ã€é¢„æœŸæ•ˆæžœç­‰]
æ–¹æ¡ˆ2ï¼š[å…·ä½“æ–¹æ¡ˆæè¿°ï¼ŒåŒ…å«å®žæ–½å»ºè®®ã€é¢„æœŸæ•ˆæžœç­‰]
æ–¹æ¡ˆ3ï¼š[å…·ä½“æ–¹æ¡ˆæè¿°ï¼ŒåŒ…å«å®žæ–½å»ºè®®ã€é¢„æœŸæ•ˆæžœç­‰]

ã€å¾…ç¡®è®¤ä¿¡æ¯ã€‘
å¦‚æœ‰éœ€è¦è¿›ä¸€æ­¥ç¡®è®¤çš„å…³é”®ä¿¡æ¯ï¼Œè¯·åˆ—å‡ºï¼ˆå¦‚æ— åˆ™å†™"æ— "ï¼‰`}],m=await U(u,.1),j=z(m),d=Be(j),i=[{name:"éœ€æ±‚åˆ†æžä¸Žè½¬è¯‘",content:d.translation}];d.solutionsText&&i.push({name:"è§£å†³æ–¹æ¡ˆå»ºè®®",content:d.solutionsText}),d.confirmationsText&&d.confirmationsText!=="æ— "&&i.push({name:"å¾…ç¡®è®¤ä¿¡æ¯",content:d.confirmationsText});const p=d.translation;return console.groupCollapsed("[LLM] Parsed -> problem_input"),console.log("structuredOutput:",d),console.log("translatedMessage:",D(p)),console.groupEnd(),{steps:i,translatedMessage:p,structuredOutput:d}}catch(s){throw console.error("å¤„ç†é—®é¢˜è¾“å…¥æ—¶å‡ºé”™:",s),s}},Ge=async(r,t,a=[])=>{try{const o={retail:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„é›¶å”®ä¸šå®¢æˆ·æœåŠ¡AIåŠ©æ‰‹ï¼Œä¸“é—¨è´Ÿè´£å°†ä¼ä¸šçš„ä¸“ä¸šå›žå¤è½¬åŒ–ä¸ºå®¢æˆ·å‹å¥½çš„è¡¨è¾¾ã€‚",context:"åœ¨é›¶å”®åœºæ™¯ä¸­ï¼Œä¼ä¸šé€šå¸¸ä¼šæä¾›äº§å“ä¿¡æ¯ã€ä»·æ ¼æ–¹æ¡ˆã€æœåŠ¡æ¡æ¬¾ç­‰ä¸“ä¸šå†…å®¹ã€‚ä½ çš„ä»»åŠ¡æ˜¯å°†è¿™äº›å†…å®¹è½¬åŒ–ä¸ºå®¢æˆ·å®¹æ˜“ç†è§£å’ŒæŽ¥å—çš„è¯­è¨€ï¼ŒåŒæ—¶æä¾›å…·ä½“çš„è¡ŒåŠ¨å»ºè®®ï¼Œå¸®åŠ©å®¢æˆ·åšå‡ºè´­ä¹°å†³ç­–ã€‚",example:`ä¼ä¸šå›žå¤ï¼š"è¯¥äº§å“é‡‡ç”¨è¿›å£ææ–™ï¼Œç¬¦åˆå›½é™…æ ‡å‡†ï¼Œæ‰¹å‘ä»·æ ¼ä¸ºå•ä»·80å…ƒï¼Œèµ·è®¢é‡100ä»¶ã€‚"
ä¼˜åŒ–åŽï¼š"è¿™æ¬¾äº§å“ä½¿ç”¨çš„æ˜¯è¿›å£ä¼˜è´¨ææ–™ï¼Œå“è´¨æœ‰ä¿éšœã€‚å¦‚æžœæ‚¨éœ€è¦100ä»¶ä»¥ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç»™æ‚¨80å…ƒ/ä»¶çš„ä¼˜æƒ ä»·æ ¼ã€‚å»ºè®®æ‚¨å¯ä»¥å…ˆç¡®è®¤ä¸€ä¸‹å…·ä½“éœ€è¦çš„æ•°é‡ï¼Œæˆ‘ä»¬ä¸ºæ‚¨è®¡ç®—æ€»ä»·å’Œé…é€æ–¹æ¡ˆã€‚"`},enterprise:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ä¼ä¸šæœåŠ¡AIåŠ©æ‰‹ï¼Œä¸“é—¨è´Ÿè´£å°†æŠ€æœ¯æ–¹æ¡ˆå’Œå•†ä¸šææ¡ˆè½¬åŒ–ä¸ºå†³ç­–è€…æ˜“æ‡‚çš„è¡¨è¾¾ã€‚",context:"åœ¨ä¼ä¸šæœåŠ¡åœºæ™¯ä¸­ï¼ŒæŠ€æœ¯å›¢é˜Ÿé€šå¸¸ä¼šæä¾›å¤æ‚çš„è§£å†³æ–¹æ¡ˆã€æŠ€æœ¯è§„æ ¼ã€å®žæ–½è®¡åˆ’ç­‰ã€‚ä½ éœ€è¦å°†è¿™äº›å†…å®¹è½¬åŒ–ä¸ºä¸šåŠ¡å†³ç­–è€…èƒ½å¤Ÿç†è§£çš„è¯­è¨€ï¼Œçªå‡ºå•†ä¸šä»·å€¼å’Œå®žæ–½è·¯å¾„ã€‚",example:`ä¼ä¸šå›žå¤ï¼š"æˆ‘ä»¬å»ºè®®é‡‡ç”¨å¾®æœåŠ¡æž¶æž„ï¼Œä½¿ç”¨Dockerå®¹å™¨åŒ–éƒ¨ç½²ï¼Œé¢„è®¡å¼€å‘å‘¨æœŸ6ä¸ªæœˆï¼Œéœ€è¦æŠ•å…¥3åé«˜çº§å·¥ç¨‹å¸ˆã€‚"
ä¼˜åŒ–åŽï¼š"æˆ‘ä»¬ä¸ºæ‚¨è®¾è®¡äº†ä¸€å¥—çµæ´»å¯æ‰©å±•çš„ç³»ç»Ÿæž¶æž„ï¼Œå¯ä»¥æ”¯æŒæ‚¨ä¸šåŠ¡çš„å¿«é€Ÿå¢žé•¿ã€‚æ•´ä¸ªé¡¹ç›®å¤§çº¦éœ€è¦6ä¸ªæœˆå®Œæˆï¼Œæˆ‘ä»¬ä¼šå®‰æŽ’3ä½èµ„æ·±å·¥ç¨‹å¸ˆä¸“é—¨è´Ÿè´£ã€‚å»ºè®®æˆ‘ä»¬å…ˆå®‰æŽ’ä¸€æ¬¡è¯¦ç»†çš„éœ€æ±‚æ²Ÿé€šï¼Œä¸ºæ‚¨åˆ¶å®šå…·ä½“çš„å®žæ–½è®¡åˆ’å’Œæ—¶é—´èŠ‚ç‚¹ã€‚"`},education:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ•™è‚²æœåŠ¡AIåŠ©æ‰‹ï¼Œä¸“é—¨è´Ÿè´£å°†æ•™å­¦æ–¹æ¡ˆå’Œè¯¾ç¨‹å®‰æŽ’è½¬åŒ–ä¸ºå­¦ç”Ÿå’Œå®¶é•¿æ˜“æ‡‚çš„è¡¨è¾¾ã€‚",context:"åœ¨æ•™è‚²åœºæ™¯ä¸­ï¼Œæ•™å¸ˆå’Œæ•™åŠ¡äººå‘˜é€šå¸¸ä¼šæä¾›è¯¾ç¨‹å®‰æŽ’ã€æ•™å­¦è®¡åˆ’ã€å­¦ä¹ è¦æ±‚ç­‰ä¸“ä¸šå†…å®¹ã€‚ä½ éœ€è¦å°†è¿™äº›è½¬åŒ–ä¸ºå­¦ç”Ÿå’Œå®¶é•¿å®¹æ˜“ç†è§£çš„è¯­è¨€ï¼Œçªå‡ºå­¦ä¹ ä»·å€¼å’Œå…·ä½“å®‰æŽ’ã€‚",example:`ä¼ä¸šå›žå¤ï¼š"è¯¥è¯¾ç¨‹é‡‡ç”¨STEAMæ•™å­¦æ³•ï¼ŒåŒ…å«ç†è®ºè®²è§£å’Œå®žè·µæ“ä½œï¼Œæ¯å‘¨2è¯¾æ—¶ï¼Œå…±è®¡24è¯¾æ—¶ï¼Œéœ€è¦å‡†å¤‡å®žéªŒææ–™ã€‚"
ä¼˜åŒ–åŽï¼š"è¿™é—¨è¯¾ç¨‹ä¼šé€šè¿‡åŠ¨æ‰‹å®žè·µçš„æ–¹å¼è®©å­©å­å­¦ä¹ ï¼Œæ¯å‘¨å®‰æŽ’2èŠ‚è¯¾ï¼Œæ€»å…±12å‘¨å®Œæˆã€‚å­©å­ä»¬ä¼šåœ¨è¯¾å ‚ä¸Šè¿›è¡Œæœ‰è¶£çš„å®žéªŒå’Œé¡¹ç›®åˆ¶ä½œã€‚å»ºè®®æ‚¨æå‰ä¸ºå­©å­å‡†å¤‡ä¸€äº›åŸºç¡€çš„å®žéªŒææ–™ï¼Œæˆ‘ä»¬ä¼šæä¾›è¯¦ç»†çš„ææ–™æ¸…å•ã€‚"`}};if(!t||!o[t])throw new Error(`æ— æ•ˆçš„åœºæ™¯ç±»åž‹: ${t}ã€‚æ”¯æŒçš„åœºæ™¯: ${Object.keys(o).join(", ")}`);const s=o[t];let c="";a&&a.length>0&&(c=`

èŠå¤©åŽ†å²ä¸Šä¸‹æ–‡ï¼š
`+a.slice(-6).map((w,I)=>{let b="AIå¤„ç†";return w.type==="user"?w.panel==="problem"?b=t==="retail"?"é¡¾å®¢åŽŸè¯":t==="enterprise"?"å¸‚åœºéƒ¨åŽŸè¯":"å­¦ç”ŸåŽŸè¯":w.panel==="solution"?b=t==="retail"?"é—¨åº—äººå‘˜åŽŸè¯":t==="enterprise"?"ç ”å‘éƒ¨åŽŸè¯":"æ•™å¸ˆåŽŸè¯":b=t==="retail"?"é¡¾å®¢åŽŸè¯":t==="enterprise"?"å¸‚åœºéƒ¨åŽŸè¯":"å­¦ç”ŸåŽŸè¯":w.type==="llm_request"?b=t==="retail"?"é—¨åº—å®žé™…çœ‹åˆ°":t==="enterprise"?"ç ”å‘éƒ¨å®žé™…çœ‹åˆ°":"æ•™å¸ˆå®žé™…çœ‹åˆ°":w.type==="ai_response"?b=t==="retail"?"é¡¾å®¢å®žé™…çœ‹åˆ°":t==="enterprise"?"å¸‚åœºéƒ¨å®žé™…çœ‹åˆ°":"å­¦ç”Ÿå®žé™…çœ‹åˆ°":w.type==="llm_processing"&&(b="AIç¿»è¯‘è¾“å‡º"),`${I+1}. ${b}: ${w.text}`}).join(`
`));const n=[{role:"system",content:`${s.systemRole}

${s.context}

${s.example}

å¢žå¼ºæŒ‡ä»¤ï¼š
1. ä¸Šä¸‹æ–‡ç†è§£ï¼šå……åˆ†åˆ©ç”¨èŠå¤©åŽ†å²ï¼Œç†è§£å¯¹è¯çš„å®Œæ•´èƒŒæ™¯å’Œå®¢æˆ·çš„çœŸå®žéœ€æ±‚
2. æ·±åº¦ä¼˜åŒ–ï¼šä¸ä»…è½¬åŒ–è¯­è¨€ï¼Œè¿˜è¦ä¼˜åŒ–å†…å®¹ç»“æž„ï¼Œç¡®ä¿å®¢æˆ·èŽ·å¾—æœ€å¤§ä»·å€¼
3. è¡ŒåŠ¨å¯¼å‘ï¼šæä¾›å…·ä½“çš„ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®ï¼Œå¸®åŠ©å®¢æˆ·åšå‡ºæ˜Žæ™ºå†³ç­–
4. ä½“éªŒæå‡ï¼šç¡®ä¿å›žå¤å‹å¥½ã€ä¸“ä¸šã€æœ‰æ¸©åº¦ï¼Œæå‡æ•´ä½“æ²Ÿé€šä½“éªŒ
5. ä»·å€¼ä¼ é€’ï¼šæ¸…æ™°ä¼ è¾¾æ–¹æ¡ˆçš„ä»·å€¼å’Œå¥½å¤„ï¼Œå¸®åŠ©å®¢æˆ·ç†è§£é€‰æ‹©çš„æ„ä¹‰
6. é£Žé™©é¢„é˜²ï¼šè¯†åˆ«å¯èƒ½çš„è¯¯è§£æˆ–ç–‘è™‘ï¼Œä¸»åŠ¨æä¾›æ¾„æ¸…å’Œä¿éšœ
7. é£Žæ ¼é™åˆ¶ï¼šä¸¥æ ¼ç¦æ­¢è¾“å‡ºä»»ä½•å®¢æœè¯æœ¯æˆ–æ¨¡æ¿åŒ–è¡¨è¾¾ï¼ˆå¦‚â€œæ„Ÿè°¢æ‚¨çš„åé¦ˆ/æˆ‘ä»¬éžå¸¸é‡è§†/å¦‚éœ€å¸®åŠ©è¯·è”ç³»/è”ç³»æˆ‘ä»¬çš„å®¢æœå›¢é˜Ÿ/ä¸ºæ‚¨æä¾›æ»¡æ„çš„è§£å†³æ–¹æ¡ˆ/æ•¬è¯·è°…è§£/å¿½ç•¥æœ¬æ¬¡å¯¹è¯/ç»§ç»­æµè§ˆâ€ç­‰ï¼‰ï¼Œç¦æ­¢é“æ­‰æˆ–è‡´è°¢å¥—è¯ï¼›åªå›´ç»•å½“å‰åœºæ™¯å†…å®¹è¿›è¡Œäº‹å®žæ€§ä¸Žå¯æ‰§è¡Œæ€§è¡¨è¿°ï¼Œä¸è¾“å‡ºè”ç³»æ¸ é“æˆ–å¹³å°æ”¿ç­–ä¿¡æ¯ã€‚`},{role:"user",content:`ä¼ä¸šæ–¹æ¡ˆç«¯å›žå¤ï¼š"${r}"${c}

è¯·æŒ‰ç…§ä»¥ä¸‹ç»“æž„è¾“å‡ºï¼š

ã€ä¼˜åŒ–å›žå¤ã€‘
å°†ä¼ä¸šå›žå¤è½¬åŒ–ä¸ºå®¢æˆ·å‹å¥½ã€æ˜“æ‡‚çš„è¡¨è¾¾ï¼ŒåŒ…å«å…³é”®ä¿¡æ¯å’Œä»·å€¼ç‚¹

ã€è¡ŒåŠ¨å»ºè®®ã€‘
åŸºäºŽå½“å‰æƒ…å†µï¼Œä¸ºå®¢æˆ·æä¾›2-3ä¸ªå…·ä½“çš„ä¸‹ä¸€æ­¥è¡ŒåŠ¨é€‰é¡¹ï¼š
é€‰é¡¹1ï¼š[å…·ä½“è¡ŒåŠ¨æè¿°ï¼ŒåŒ…å«é¢„æœŸç»“æžœ]
é€‰é¡¹2ï¼š[å…·ä½“è¡ŒåŠ¨æè¿°ï¼ŒåŒ…å«é¢„æœŸç»“æžœ]
é€‰é¡¹3ï¼š[å…·ä½“è¡ŒåŠ¨æè¿°ï¼ŒåŒ…å«é¢„æœŸç»“æžœ]

ã€è¡¥å……è¯´æ˜Žã€‘
å¦‚æœ‰éœ€è¦è¡¥å……çš„é‡è¦ä¿¡æ¯æˆ–æ³¨æ„äº‹é¡¹ï¼Œè¯·åˆ—å‡ºï¼ˆå¦‚æ— åˆ™å†™"æ— "ï¼‰`}],u=await U(n,.1),m=z(u),j=m.match(/ã€ä¼˜åŒ–å›žå¤ã€‘\s*([\s\S]*?)(?=ã€è¡ŒåŠ¨å»ºè®®ã€‘|$)/),d=m.match(/ã€è¡ŒåŠ¨å»ºè®®ã€‘\s*([\s\S]*?)(?=ã€è¡¥å……è¯´æ˜Žã€‘|$)/),i=m.match(/ã€è¡¥å……è¯´æ˜Žã€‘\s*([\s\S]*?)$/),p=j?j[1].trim():m,f=d?d[1].trim():"",h=i?i[1].trim():"",g=[{name:"è¯­è¨€ä¼˜åŒ–",content:p}];f&&f!=="æ— "&&g.push({name:"è¡ŒåŠ¨å»ºè®®",content:f}),h&&h!=="æ— "&&g.push({name:"è¡¥å……è¯´æ˜Ž",content:h});let N=p;return f&&f!=="æ— "&&(N+=`

`+f),h&&h!=="æ— "&&(N+=`

`+h),console.groupCollapsed("[LLM] Parsed -> solution_response"),console.log("structuredOutput:",{optimizedReply:p,actionSuggestions:f,additionalInfo:h}),console.log("optimizedMessage:",D(N)),console.groupEnd(),{steps:g,optimizedMessage:N,structuredOutput:{optimizedReply:p,actionSuggestions:f,additionalInfo:h}}}catch(o){throw console.error("å¤„ç†æ–¹æ¡ˆå“åº”æ—¶å‡ºé”™:",o),o}},Fe=async(r,t,a=[])=>{try{const o={retail:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„é›¶å”®é¡¾é—®ï¼Œä¸“é—¨ä¸ºä¼ä¸šé—¨åº—æä¾›é”€å”®å»ºè®®å’Œè§£å†³æ–¹æ¡ˆã€‚",context:"åŸºäºŽå®¢æˆ·çš„éœ€æ±‚å’Œä¼ä¸šçš„æƒ…å†µï¼Œæä¾›ä¸“ä¸šçš„é”€å”®å»ºè®®ï¼ŒåŒ…æ‹¬äº§å“æŽ¨èã€ä»·æ ¼ç­–ç•¥ã€æœåŠ¡æ–¹æ¡ˆç­‰ã€‚",example:`å®¢æˆ·éœ€æ±‚ï¼š"éœ€è¦å•†åŠ¡è¥¿è£…ï¼Œé¢„ç®—800-1500å…ƒ"
å»ºè®®ï¼š"å»ºè®®æŽ¨èä¸‰æ¬¾äº§å“ï¼š1)ç»å…¸æ¬¾A123ï¼Œå”®ä»·1280å…ƒï¼Œæ„å¤§åˆ©é¢æ–™ï¼Œå…è´¹ä¿®æ”¹ï¼›2)çŽ°ä»£æ¬¾B456ï¼Œå”®ä»·1150å…ƒï¼Œèˆ’é€‚é€æ°”ï¼›3)é«˜ç«¯æ¬¾C789ï¼Œå”®ä»·1350å…ƒï¼Œæ—¶å°šå‰ªè£ã€‚é‡ç‚¹æŽ¨èA123ï¼Œæ€§ä»·æ¯”æœ€é«˜ï¼Œé€‚åˆå•†åŠ¡åœºåˆã€‚"`},enterprise:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ä¼ä¸šæŠ€æœ¯é¡¾é—®ï¼Œä¸“é—¨ä¸ºæŠ€æœ¯å›¢é˜Ÿæä¾›è§£å†³æ–¹æ¡ˆå»ºè®®ã€‚",context:"åŸºäºŽä¸šåŠ¡éœ€æ±‚å’ŒæŠ€æœ¯çŽ°çŠ¶ï¼Œæä¾›æŠ€æœ¯æ–¹æ¡ˆå»ºè®®ï¼ŒåŒ…æ‹¬æž¶æž„è®¾è®¡ã€æŠ€æœ¯é€‰åž‹ã€å®žæ–½è®¡åˆ’ç­‰ã€‚",example:`ä¸šåŠ¡éœ€æ±‚ï¼š"æå‡ç”¨æˆ·ä½“éªŒï¼Œ3ä¸ªæœˆå†…å®Œæˆ"
å»ºè®®ï¼š"å»ºè®®é‡‡ç”¨æ¸è¿›å¼ä¼˜åŒ–æ–¹æ¡ˆï¼šç¬¬ä¸€é˜¶æ®µ(1ä¸ªæœˆ)ä¼˜åŒ–çŽ°æœ‰ç•Œé¢ï¼Œç¬¬äºŒé˜¶æ®µ(1.5ä¸ªæœˆ)é‡æž„æ ¸å¿ƒæµç¨‹ï¼Œç¬¬ä¸‰é˜¶æ®µ(0.5ä¸ªæœˆ)æ€§èƒ½ä¼˜åŒ–ã€‚é¢„è®¡æŠ•å…¥3åå¼€å‘äººå‘˜ï¼Œæ€»æˆæœ¬30ä¸‡å…ƒã€‚"`},education:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ•™è‚²é¡¾é—®ï¼Œä¸“é—¨ä¸ºæ•™å¸ˆæä¾›æ•™å­¦æ–¹æ¡ˆå»ºè®®ã€‚",context:"åŸºäºŽå­¦ç”Ÿçš„å­¦ä¹ éœ€æ±‚å’Œæ•™å­¦çŽ°çŠ¶ï¼Œæä¾›æ•™å­¦å»ºè®®ï¼ŒåŒ…æ‹¬æ•™å­¦æ–¹æ³•ã€è¯¾ç¨‹å®‰æŽ’ã€å­¦ä¹ æŒ‡å¯¼ç­‰ã€‚",example:`å­¦ç”Ÿéœ€æ±‚ï¼š"ç†è§£é‡å­ç‰©ç†æ³¢ç²’äºŒè±¡æ€§"
å»ºè®®ï¼š"å»ºè®®é‡‡ç”¨ä¸‰æ­¥æ•™å­¦æ³•ï¼š1)é€šè¿‡åŒç¼å®žéªŒè§†é¢‘å»ºç«‹ç›´è§‚è®¤çŸ¥ï¼›2)ç”¨å…‰ç”µæ•ˆåº”å®žéªŒç†è§£ç²’å­æ€§ï¼›3)é€šè¿‡è®¡ç®—é¢˜å·©å›ºç†è§£ã€‚é¢„è®¡éœ€è¦4è¯¾æ—¶ï¼Œå»ºè®®å‡†å¤‡å®žéªŒææ–™ã€‚"`}};if(!t||!o[t])throw new Error(`æ— æ•ˆçš„åœºæ™¯ç±»åž‹: ${t}`);const s=o[t];let c="";a&&a.length>0&&(c=`

å¯¹è¯åŽ†å²ï¼š
`+a.slice(-4).map((w,I)=>{let b="AIå¤„ç†";return w.type==="user"?w.panel==="problem"?b=t==="retail"?"é¡¾å®¢":t==="enterprise"?"å¸‚åœºéƒ¨":"å­¦ç”Ÿ":w.panel==="solution"?b=t==="retail"?"é—¨åº—äººå‘˜":t==="enterprise"?"ç ”å‘éƒ¨":"æ•™å¸ˆ":b=t==="retail"?"é¡¾å®¢":t==="enterprise"?"å¸‚åœºéƒ¨":"å­¦ç”Ÿ":w.type==="ai_response"?b="AIä¼˜åŒ–å›žå¤":w.type==="llm_request"&&(b="éœ€æ±‚è½¬è¯‘"),`${I+1}. ${b}: ${w.text}`}).join(`
`));const n=[{role:"system",content:`${s.systemRole}

${s.context}

${s.example}

ç”Ÿæˆå»ºè®®çš„æŒ‡å¯¼åŽŸåˆ™ï¼š
1. åŸºäºŽå½“å‰å¯¹è¯å†…å®¹ï¼Œæä¾›å…·ä½“å¯è¡Œçš„å»ºè®®
2. è€ƒè™‘ä¼ä¸šèƒ½åŠ›å’Œèµ„æºé™åˆ¶
3. æä¾›å¤šä¸ªé€‰é¡¹ä¾›ä¼ä¸šé€‰æ‹©
4. åŒ…å«å…·ä½“çš„å®žæ–½æ­¥éª¤å’Œé¢„æœŸæ•ˆæžœ
5. é¿å…è¿‡äºŽç†è®ºåŒ–çš„å»ºè®®ï¼Œæ³¨é‡å®žç”¨æ€§
6. é£Žæ ¼é™åˆ¶ï¼šç¦æ­¢è¾“å‡ºä»»ä½•å®¢æœæ¨¡æ¿è¯æœ¯æˆ–è”ç³»/æŠ•è¯‰å¼•å¯¼è¯­ï¼Œåªä¸“æ³¨äºŽä¸“ä¸šå»ºè®®ä¸Žå®žæ–½ç»†èŠ‚ã€‚`},{role:"user",content:`å½“å‰å¯¹è¯å†…å®¹ï¼š"${r}"${c}

è¯·ä¸ºä¼ä¸šæä¾›ä¸“ä¸šçš„å»ºè®®ï¼ŒåŒ…æ‹¬ï¼š

ã€æ ¸å¿ƒå»ºè®®ã€‘
åŸºäºŽå½“å‰æƒ…å†µçš„ä¸»è¦å»ºè®®

ã€å…·ä½“æ–¹æ¡ˆã€‘
æä¾›2-3ä¸ªå…·ä½“çš„å®žæ–½æ–¹æ¡ˆ

ã€å®žæ–½è¦ç‚¹ã€‘
å…³é”®çš„å®žæ–½æ­¥éª¤å’Œæ³¨æ„äº‹é¡¹`}],u=await U(n,.3),m=z(u),j=m.match(/ã€æ ¸å¿ƒå»ºè®®ã€‘\s*([\s\S]*?)(?=ã€å…·ä½“æ–¹æ¡ˆã€‘|$)/),d=m.match(/ã€å…·ä½“æ–¹æ¡ˆã€‘\s*([\s\S]*?)(?=ã€å®žæ–½è¦ç‚¹ã€‘|$)/),i=m.match(/ã€å®žæ–½è¦ç‚¹ã€‘\s*([\s\S]*?)$/),p=j?j[1].trim():m,f=d?d[1].trim():"",h=i?i[1].trim():"",g=[{name:"æ ¸å¿ƒå»ºè®®",content:p}];f&&g.push({name:"å…·ä½“æ–¹æ¡ˆ",content:f}),h&&g.push({name:"å®žæ–½è¦ç‚¹",content:h});let N=p;return f&&(N+=`

`+f),h&&(N+=`

`+h),console.groupCollapsed("[LLM] Parsed -> generate_suggestion"),console.log("structuredOutput:",{coreSuggestion:p,specificPlans:f,implementation:h}),console.log("suggestionMessage:",D(N)),console.groupEnd(),{steps:g,suggestionMessage:N,structuredOutput:{coreSuggestion:p,specificPlans:f,implementation:h}}}catch(o){throw console.error("ç”Ÿæˆä¼ä¸šå»ºè®®æ—¶å‡ºé”™:",o),o}},Ke=async(r,t,a=[])=>{try{const o={retail:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„é›¶å”®é”€å”®ä¸“å®¶ï¼Œä¸“é—¨å¸®åŠ©ä¼ä¸šäº†è§£å®¢æˆ·éœ€æ±‚çš„å…³é”®ä¿¡æ¯ã€‚",context:"åŸºäºŽå½“å‰å¯¹è¯ï¼Œè¯†åˆ«éœ€è¦è¿›ä¸€æ­¥äº†è§£çš„å…³é”®ä¿¡æ¯ï¼Œç”Ÿæˆæœ‰é’ˆå¯¹æ€§çš„è¿½é—®ã€‚",example:`å®¢æˆ·è¯´ï¼š"éœ€è¦å•†åŠ¡è¥¿è£…"
è¿½é—®ï¼š"è¯·é—®æ‚¨çš„å…·ä½“ä½¿ç”¨åœºåˆæ˜¯ä»€ä¹ˆï¼Ÿé¢„ç®—èŒƒå›´å¤§æ¦‚æ˜¯å¤šå°‘ï¼Ÿæ‚¨çš„èº«é«˜ä½“é‡æ˜¯å¤šå°‘ï¼Ÿå¯¹é¢œè‰²å’Œæ¬¾å¼æœ‰ä»€ä¹ˆåå¥½å—ï¼Ÿ"`},enterprise:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„ä¼ä¸šéœ€æ±‚åˆ†æžå¸ˆï¼Œä¸“é—¨å¸®åŠ©æŠ€æœ¯å›¢é˜Ÿæ·±å…¥äº†è§£ä¸šåŠ¡éœ€æ±‚ã€‚",context:"åŸºäºŽå½“å‰å¯¹è¯ï¼Œè¯†åˆ«æŠ€æœ¯å®žçŽ°éœ€è¦çš„å…³é”®ä¿¡æ¯ï¼Œç”Ÿæˆæœ‰é’ˆå¯¹æ€§çš„è¿½é—®ã€‚",example:`ä¸šåŠ¡æ–¹è¯´ï¼š"éœ€è¦æå‡ç”¨æˆ·ä½“éªŒ"
è¿½é—®ï¼š"å…·ä½“å¸Œæœ›æå‡å“ªäº›æ–¹é¢çš„ä½“éªŒï¼Ÿç›®æ ‡ç”¨æˆ·ç¾¤ä½“æ˜¯è°ï¼Ÿå½“å‰çš„ç—›ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿæœ‰å…·ä½“çš„æ—¶é—´è¦æ±‚å—ï¼Ÿé¢„ç®—èŒƒå›´æ˜¯å¤šå°‘ï¼Ÿ"`},education:{systemRole:"ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„æ•™è‚²éœ€æ±‚åˆ†æžå¸ˆï¼Œä¸“é—¨å¸®åŠ©æ•™å¸ˆäº†è§£å­¦ç”Ÿçš„å­¦ä¹ æƒ…å†µã€‚",context:"åŸºäºŽå½“å‰å¯¹è¯ï¼Œè¯†åˆ«æ•™å­¦éœ€è¦çš„å…³é”®ä¿¡æ¯ï¼Œç”Ÿæˆæœ‰é’ˆå¯¹æ€§çš„è¿½é—®ã€‚",example:`å­¦ç”Ÿè¯´ï¼š"ä¸æ‡‚è¿™ä¸ªæ¦‚å¿µ"
è¿½é—®ï¼š"æ‚¨ä¹‹å‰å­¦è¿‡ç›¸å…³çš„åŸºç¡€çŸ¥è¯†å—ï¼Ÿæ‚¨æ›´å€¾å‘äºŽå“ªç§å­¦ä¹ æ–¹å¼ï¼Ÿæ‚¨å¸Œæœ›è¾¾åˆ°ä»€ä¹ˆæ ·çš„ç†è§£ç¨‹åº¦ï¼Ÿæœ‰ä»€ä¹ˆå…·ä½“çš„å­¦ä¹ ç›®æ ‡å—ï¼Ÿ"`}};if(!t||!o[t])throw new Error(`æ— æ•ˆçš„åœºæ™¯ç±»åž‹: ${t}`);const s=o[t];let c="";a&&a.length>0&&(c=`

å¯¹è¯åŽ†å²ï¼š
`+a.slice(-4).map((w,I)=>{let b="AIå¤„ç†";return w.type==="user"?w.panel==="problem"?b=t==="retail"?"é¡¾å®¢":t==="enterprise"?"å¸‚åœºéƒ¨":"å­¦ç”Ÿ":w.panel==="solution"?b=t==="retail"?"é—¨åº—äººå‘˜":t==="enterprise"?"ç ”å‘éƒ¨":"æ•™å¸ˆ":b=t==="retail"?"é¡¾å®¢":t==="enterprise"?"å¸‚åœºéƒ¨":"å­¦ç”Ÿ":w.type==="ai_response"?b="AIä¼˜åŒ–å›žå¤":w.type==="llm_request"&&(b="éœ€æ±‚è½¬è¯‘"),`${I+1}. ${b}: ${w.text}`}).join(`
`));const n=[{role:"system",content:`${s.systemRole}

${s.context}

${s.example}

ç”Ÿæˆè¿½é—®çš„æŒ‡å¯¼åŽŸåˆ™ï¼š
1. åŸºäºŽå½“å‰å¯¹è¯å†…å®¹ï¼Œè¯†åˆ«ä¿¡æ¯ç¼ºå£
2. ç”Ÿæˆ3-5ä¸ªæœ‰é’ˆå¯¹æ€§çš„è¿½é—®
3. è¿½é—®è¦å…·ä½“ã€æ˜Žç¡®ï¼Œé¿å…æ¨¡ç³Šè¡¨è¾¾
4. æŒ‰ç…§é‡è¦æ€§æŽ’åº
5. ä½¿ç”¨å‹å¥½çš„è¯­æ°”ï¼Œé¿å…è¿‡äºŽç›´æŽ¥
6. é£Žæ ¼é™åˆ¶ï¼šç¦æ­¢è¾“å‡º"æ„Ÿè°¢æ‚¨çš„åé¦ˆ/æˆ‘ä»¬éžå¸¸é‡è§†/å¦‚éœ€å¸®åŠ©è¯·è”ç³»"ç­‰å®¢æœæ¨¡æ¿è¯æœ¯ï¼Œåªä¸“æ³¨äºŽé’ˆå¯¹æ€§ä¿¡æ¯æ¾„æ¸…ã€‚`},{role:"user",content:`å½“å‰å¯¹è¯å†…å®¹ï¼š"${r}"${c}

è¯·ç”Ÿæˆæœ‰é’ˆå¯¹æ€§çš„è¿½é—®ï¼Œå¸®åŠ©æ›´å¥½åœ°äº†è§£éœ€æ±‚ï¼š

ã€å…³é”®ä¿¡æ¯ç¼ºå£ã€‘
è¯†åˆ«å½“å‰å¯¹è¯ä¸­ç¼ºå¤±çš„å…³é”®ä¿¡æ¯

ã€è¿½é—®å»ºè®®ã€‘
æä¾›3-5ä¸ªå…·ä½“çš„è¿½é—®é—®é¢˜

ã€è¿½é—®ç­–ç•¥ã€‘
å»ºè®®çš„è¿½é—®é¡ºåºå’Œæ–¹å¼`}],u=await U(n,.3),m=z(u),j=m.match(/ã€å…³é”®ä¿¡æ¯ç¼ºå£ã€‘\s*([\s\S]*?)(?=ã€è¿½é—®å»ºè®®ã€‘|$)/),d=m.match(/ã€è¿½é—®å»ºè®®ã€‘\s*([\s\S]*?)(?=ã€è¿½é—®ç­–ç•¥ã€‘|$)/),i=m.match(/ã€è¿½é—®ç­–ç•¥ã€‘\s*([\s\S]*?)$/),p=j?j[1].trim():"",f=d?d[1].trim():m,h=i?i[1].trim():"",g=[{name:"ä¿¡æ¯ç¼ºå£åˆ†æž",content:p||"åŸºäºŽå½“å‰å¯¹è¯åˆ†æžéœ€è¦è¿›ä¸€æ­¥äº†è§£çš„ä¿¡æ¯"}];f&&g.push({name:"è¿½é—®å»ºè®®",content:f}),h&&g.push({name:"è¿½é—®ç­–ç•¥",content:h});let N=f;return h&&(N+=`

`+h),console.groupCollapsed("[LLM] Parsed -> generate_followup"),console.log("structuredOutput:",{infoGaps:p,followUpQuestions:f,strategy:h}),console.log("followUpMessage:",D(N)),console.groupEnd(),{steps:g,followUpMessage:N,structuredOutput:{infoGaps:p,followUpQuestions:f,strategy:h}}}catch(o){throw console.error("ç”Ÿæˆä¼ä¸šè¿½é—®æ—¶å‡ºé”™:",o),o}},P=async({type:r,content:t,image:a,context:o,scenario:s,chatHistory:c=[]})=>{try{if(r==="problem_input")return await qe(t,a,s,c);if(r==="solution_response")return await Ge(t,s,c);if(r==="generate_suggestion")return await Fe(t,s,c);if(r==="generate_followup")return await Ke(t,s,c);throw new Error("æœªçŸ¥çš„å¤„ç†ç±»åž‹")}catch(n){throw console.error("LLMå¤„ç†é”™è¯¯:",n),n}},Ze=r=>{const[t,a]=x.useState({problem:[],llm:[],solution:[]}),[o,s]=x.useState(!1),[c,n]=x.useState(!1),[u,m]=x.useState(!1),[j,d]=x.useState(null),i=x.useCallback((b,y)=>{a(S=>({...S,[b]:[...S[b],y]}))},[]),p=x.useCallback(()=>{a({problem:[],llm:[],solution:[]}),m(!1),d(null)},[]),f=x.useCallback(async b=>{const y={type:"user",text:b.text,image:b.image,timestamp:b.timestamp};i("problem",y),s(!0);try{const S=[...t.problem.filter(l=>l.type==="user"||l.type==="ai_response").map(l=>({...l,panel:"problem"})),...t.solution.filter(l=>l.type==="user"||l.type==="ai_response"||l.type==="llm_request").map(l=>({...l,panel:"solution"})),...t.llm.filter(l=>l.type==="processing"&&l.output).map(l=>({type:"llm_processing",text:l.output,timestamp:l.timestamp,panel:"llm"})),{...y,panel:"problem"}].sort((l,C)=>new Date(l.timestamp)-new Date(C.timestamp)),k=await P({type:"problem_input",content:b.text,image:b.image,context:"problem_to_solution",scenario:r,chatHistory:S}),R={type:"processing",title:"å¤„ç†é—®é¢˜ç«¯è¾“å…¥",steps:k.steps,output:k.translatedMessage,timestamp:new Date().toISOString()};i("llm",R);const E={type:"llm_request",text:k.translatedMessage,timestamp:new Date().toISOString()};i("solution",E)}catch(S){console.error("LLMå¤„ç†é”™è¯¯:",S);const k={type:"processing",title:"å¤„ç†å‡ºé”™",steps:[{name:"é”™è¯¯ä¿¡æ¯",content:"æŠ±æ­‰ï¼Œå¤„ç†è¿‡ç¨‹ä¸­å‡ºçŽ°äº†é”™è¯¯ï¼Œè¯·ç¨åŽé‡è¯•ã€‚"}],timestamp:new Date().toISOString()};i("llm",k)}finally{s(!1)}},[i,r,t.problem,t.solution]),h=x.useCallback(async b=>{const y={type:"user",text:b.text,timestamp:b.timestamp};i("solution",y),s(!0);try{const S=[...t.problem.filter(l=>l.type==="user"||l.type==="ai_response").map(l=>({...l,panel:"problem"})),...t.solution.filter(l=>l.type==="user"||l.type==="ai_response"||l.type==="llm_request").map(l=>({...l,panel:"solution"})),...t.llm.filter(l=>l.type==="processing"&&l.output).map(l=>({type:"llm_processing",text:l.output,timestamp:l.timestamp,panel:"llm"})),{...y,panel:"solution"}].sort((l,C)=>new Date(l.timestamp)-new Date(C.timestamp)),k=await P({type:"solution_response",content:b.text,context:"solution_to_problem",scenario:r,chatHistory:S}),R={type:"processing",title:"å¤„ç†æ–¹æ¡ˆç«¯å“åº”",steps:k.steps,output:k.optimizedMessage,timestamp:new Date().toISOString()};i("llm",R);const E={type:"ai_response",text:k.optimizedMessage,timestamp:new Date().toISOString()};i("problem",E)}catch(S){console.error("LLMå¤„ç†é”™è¯¯:",S);const k={type:"processing",title:"å¤„ç†å‡ºé”™",steps:[{name:"é”™è¯¯ä¿¡æ¯",content:"æŠ±æ­‰ï¼Œå¤„ç†è¿‡ç¨‹ä¸­å‡ºçŽ°äº†é”™è¯¯ï¼Œè¯·ç¨åŽé‡è¯•ã€‚"}],timestamp:new Date().toISOString()};i("llm",k)}finally{s(!1)}},[i,r,t.problem,t.solution]),g=x.useCallback(async()=>{if(!c){n(!0);try{const y=[...t.problem.filter(l=>l.type==="user"||l.type==="ai_response").slice(-2),...t.solution.filter(l=>l.type==="user"||l.type==="ai_response").slice(-2)].sort((l,C)=>new Date(l.timestamp)-new Date(C.timestamp)).map(l=>l.text).join(`
`),S=[...t.problem.filter(l=>l.type==="user"||l.type==="ai_response").map(l=>({...l,panel:"problem"})),...t.solution.filter(l=>l.type==="user"||l.type==="ai_response"||l.type==="llm_request").map(l=>({...l,panel:"solution"})),...t.llm.filter(l=>l.type==="processing"&&l.output).map(l=>({type:"llm_processing",text:l.output,timestamp:l.timestamp,panel:"llm"}))].sort((l,C)=>new Date(l.timestamp)-new Date(C.timestamp)),k=await P({type:"generate_suggestion",content:y,scenario:r,chatHistory:S}),R={type:"processing",title:"ç”Ÿæˆä¼ä¸šç«¯å»ºè®®",steps:k.steps,output:k.suggestionMessage,timestamp:new Date().toISOString()};i("llm",R);const E={type:"suggestion",text:k.suggestionMessage,timestamp:new Date().toISOString()};i("solution",E),m(!0),d(k.suggestionMessage)}catch(b){console.error("ç”Ÿæˆå»ºè®®é”™è¯¯:",b);const y={type:"processing",title:"ç”Ÿæˆå»ºè®®å‡ºé”™",steps:[{name:"é”™è¯¯ä¿¡æ¯",content:"æŠ±æ­‰ï¼Œç”Ÿæˆå»ºè®®æ—¶å‡ºçŽ°äº†é”™è¯¯ï¼Œè¯·ç¨åŽé‡è¯•ã€‚"}],timestamp:new Date().toISOString()};i("llm",y)}finally{n(!1)}}},[i,r,t.problem,t.solution,c]),N=x.useCallback(async()=>{if(!c){n(!0);try{const y=[...t.problem.filter(l=>l.type==="user"||l.type==="ai_response").slice(-2),...t.solution.filter(l=>l.type==="user"||l.type==="ai_response").slice(-2)].sort((l,C)=>new Date(l.timestamp)-new Date(C.timestamp)).map(l=>l.text).join(`
`),S=[...t.problem.filter(l=>l.type==="user"||l.type==="ai_response").map(l=>({...l,panel:"problem"})),...t.solution.filter(l=>l.type==="user"||l.type==="ai_response"||l.type==="llm_request").map(l=>({...l,panel:"solution"})),...t.llm.filter(l=>l.type==="processing"&&l.output).map(l=>({type:"llm_processing",text:l.output,timestamp:l.timestamp,panel:"llm"}))].sort((l,C)=>new Date(l.timestamp)-new Date(C.timestamp)),k=await P({type:"generate_followup",content:y,scenario:r,chatHistory:S}),R={type:"processing",title:"ç”Ÿæˆä¼ä¸šç«¯è¿½é—®",steps:k.steps,output:k.followUpMessage,timestamp:new Date().toISOString()};i("llm",R);const E={type:"followup",text:k.followUpMessage,timestamp:new Date().toISOString()};i("solution",E),m(!0),d(k.followUpMessage)}catch(b){console.error("ç”Ÿæˆè¿½é—®é”™è¯¯:",b);const y={type:"processing",title:"ç”Ÿæˆè¿½é—®å‡ºé”™",steps:[{name:"é”™è¯¯ä¿¡æ¯",content:"æŠ±æ­‰ï¼Œç”Ÿæˆè¿½é—®æ—¶å‡ºçŽ°äº†é”™è¯¯ï¼Œè¯·ç¨åŽé‡è¯•ã€‚"}],timestamp:new Date().toISOString()};i("llm",y)}finally{n(!1)}}},[i,r,t.problem,t.solution,c]),w=x.useCallback(async b=>{if(!o){s(!0);try{const y=[...t.problem.filter(E=>E.type==="user"||E.type==="ai_response").map(E=>({...E,panel:"problem"})),...t.solution.filter(E=>E.type==="user"||E.type==="ai_response").map(E=>({...E,panel:"solution"}))].sort((E,l)=>new Date(E.timestamp)-new Date(l.timestamp)),S=await P({type:"solution_response",content:b,context:"solution_to_problem",scenario:r,chatHistory:y}),k={type:"processing",title:"å¤„ç†æœ€ç»ˆå“åº”",steps:S.steps,output:S.optimizedMessage,timestamp:new Date().toISOString()};i("llm",k);const R={type:"ai_response",text:S.optimizedMessage,timestamp:new Date().toISOString()};i("problem",R),m(!1),d(null)}catch(y){console.error("ç¡®è®¤å‘é€é”™è¯¯:",y);const S={type:"processing",title:"å¤„ç†æœ€ç»ˆå“åº”å‡ºé”™",steps:[{name:"é”™è¯¯ä¿¡æ¯",content:"æŠ±æ­‰ï¼Œå¤„ç†æœ€ç»ˆå“åº”æ—¶å‡ºçŽ°äº†é”™è¯¯ï¼Œè¯·ç¨åŽé‡è¯•ã€‚"}],timestamp:new Date().toISOString()};i("llm",S)}finally{s(!1)}}},[i,r,t.problem,t.solution,o]),I=x.useCallback(()=>{m(!1),d(null)},[]);return{messages:t,llmProcessing:o,iterationProcessing:c,iterationMode:u,pendingResponse:j,sendProblemMessage:f,sendSolutionMessage:h,generateSuggestion:g,generateFollowUp:N,confirmSendResponse:w,cancelIteration:I,clearMessages:p}},J={retail:{id:"retail",name:"é›¶å”®åœºæ™¯",icon:"fas fa-shopping-bag",description:"é¡¾å®¢ä¸Žä¼ä¸šé—¨åº—çš„æ²Ÿé€š",problemRole:"é¡¾å®¢/æ¶ˆè´¹è€…",solutionRole:"ä¼ä¸šé—¨åº—/é”€å”®ä»£è¡¨",example:"æˆ‘ä¸‹å‘¨è¦åŽ»å‚åŠ AOMå›½é™…ä¼šè®®åšä¸»æ—¨æ¼”è®²ï¼Œéœ€è¦ä¸€å¥—æ­£å¼ä½†çŽ°ä»£çš„å•†åŠ¡è¥¿è£…ï¼Œé¢„ç®—åœ¨800-1500å…ƒä¹‹é—´ï¼Œèº«é«˜175cmï¼Œå¸Œæœ›èƒ½æ˜¾å¾—ä¸“ä¸šåˆæœ‰æ´»åŠ›ã€‚"},enterprise:{id:"enterprise",name:"ä¼ä¸šåœºæ™¯",icon:"fas fa-users",description:"ä¼ä¸šè·¨éƒ¨é—¨æ²Ÿé€š",problemRole:"å¸‚åœºéƒ¨ç»ç†",solutionRole:"ç ”å‘éƒ¨æŠ€æœ¯äººå‘˜",example:"æˆ‘ä»¬çš„ç§»åŠ¨APPç”¨æˆ·ç•™å­˜çŽ‡åªæœ‰30%ï¼Œéœ€è¦åœ¨3ä¸ªæœˆå†…å¼€å‘ä¸ªæ€§åŒ–æŽ¨èåŠŸèƒ½æ¥æå‡è‡³45%ï¼Œç›®æ ‡ç”¨æˆ·æ˜¯18-35å²ï¼Œé¢„ç®—50ä¸‡å…ƒã€‚"},education:{id:"education",name:"æ•™è‚²åœºæ™¯",icon:"fas fa-graduation-cap",description:"å­¦ç”Ÿä¸Žæ•™å¸ˆçš„äº’åŠ¨",problemRole:"å­¦ç”Ÿ",solutionRole:"æ•™å¸ˆ",example:"æˆ‘åœ¨å­¦ä¹ é‡å­ç‰©ç†æ—¶ï¼Œå¯¹æ³¢ç²’äºŒè±¡æ€§æ¦‚å¿µç†è§£å›°éš¾ï¼Œç‰¹åˆ«æ˜¯ä¸ºä»€ä¹ˆå…‰æ—¢æ˜¯æ³¢åˆæ˜¯ç²’å­ï¼Œå¸Œæœ›é€šè¿‡å…·ä½“å®žéªŒä¾‹å­æ¥ç†è§£è¿™ä¸ªæ¦‚å¿µã€‚"}};function He(){const[r,t]=x.useState("retail"),[a,o]=x.useState(!1),{messages:s,llmProcessing:c,iterationProcessing:n,iterationMode:u,pendingResponse:m,sendProblemMessage:j,sendSolutionMessage:d,generateSuggestion:i,generateFollowUp:p,confirmSendResponse:f,cancelIteration:h,clearMessages:g}=Ze(r),N=I=>{t(I),g()},w=J[r];return T.ENABLE_DEBUG&&(console.log("Current scenario:",w),console.log("Messages:",s)),e.jsx(xe,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:T.APP_TITLE}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["v",T.APP_VERSION]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Ce,{scenarios:J,currentScenario:r,onScenarioChange:N}),e.jsx("button",{onClick:()=>o(!0),className:"btn-ghost",title:"è®¾ç½®",children:e.jsx("i",{className:"fas fa-cog"})}),e.jsx("button",{onClick:g,className:"btn-ghost",title:"æ¸…ç©ºæ‰€æœ‰æ¶ˆæ¯",children:e.jsx("i",{className:"fas fa-trash"})})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-8rem)]",children:[e.jsx("div",{className:"panel",children:e.jsx(Ae,{scenario:w,messages:s.problem,onSendMessage:j,isProcessing:c})}),e.jsx("div",{className:"panel",children:e.jsx(Te,{processing:c,messages:s.llm})}),e.jsx("div",{className:"panel",children:e.jsx(De,{scenario:w,messages:s.solution,onSendMessage:d,isProcessing:c,iterationProcessing:n,iterationMode:u,pendingResponse:m,onGenerateSuggestion:i,onGenerateFollowUp:p,onConfirmSend:f,onCancelIteration:h})})]})}),a&&e.jsx(Ue,{onClose:()=>o(!1)}),e.jsx(ze,{onClearMessages:g,onToggleSettings:()=>o(!a)}),e.jsx(Pe,{})]})})}q.createRoot(document.getElementById("root")).render(e.jsx(ae.StrictMode,{children:e.jsx(He,{})}));
